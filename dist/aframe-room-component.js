/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/components/ceiling.js":
/*!***********************************!*\
  !*** ./src/components/ceiling.js ***!
  \***********************************/
/***/ ((module) => {

eval("\n\nconst DOORLINK = 'a-doorlink';\nconst ROOM = 'a-room';\n\nmodule.exports.Component = AFRAME.registerComponent('ceiling', {\n  init: function () {\n    console.info('initializing ceiling');\n\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== DOORLINK && parentName !== ROOM) {\n      const message = `a-ceiling elements must have an \"${DOORLINK}\" or \"${ROOM}\" parent`;\n      throw new Error(message);\n    }\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jZWlsaW5nLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7O0FBRUEsd0JBQXdCO0FBQ3hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBEQUEwRCxTQUFTLFFBQVEsS0FBSztBQUNoRjtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL2NvbXBvbmVudHMvY2VpbGluZy5qcz9jNTU4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgRE9PUkxJTksgPSAnYS1kb29ybGluayc7XG5jb25zdCBST09NID0gJ2Etcm9vbSc7XG5cbm1vZHVsZS5leHBvcnRzLkNvbXBvbmVudCA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnY2VpbGluZycsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUuaW5mbygnaW5pdGlhbGl6aW5nIGNlaWxpbmcnKTtcblxuICAgIGNvbnN0IHBhcmVudE5hbWUgPSB0aGlzLmVsLnBhcmVudEVsPy5sb2NhbE5hbWU7XG4gICAgaWYgKHBhcmVudE5hbWUgIT09IERPT1JMSU5LICYmIHBhcmVudE5hbWUgIT09IFJPT00pIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgYS1jZWlsaW5nIGVsZW1lbnRzIG11c3QgaGF2ZSBhbiBcIiR7RE9PUkxJTkt9XCIgb3IgXCIke1JPT019XCIgcGFyZW50YDtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ceiling.js\n");

/***/ }),

/***/ "./src/components/doorhole.js":
/*!************************************!*\
  !*** ./src/components/doorhole.js ***!
  \************************************/
/***/ ((module) => {

eval("\n\nconst WALL = 'a-wall';\n\nmodule.exports.Component = AFRAME.registerComponent('doorhole', {\n  init: function () {\n    console.info('initializing doorhole');\n\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== WALL) {\n      const message = `a-doorhole elements must have an \"${WALL}\" parent`;\n      throw new Error(message);\n    }\n\n    this.el.verts = [];\n    this.el.getDoorlink = () => this.el.sceneEl.querySelector(`a-doorlink[from=\"#${this.el.id}\"], a-doorlink[to=\"#${this.el.id}\"]`);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9kb29yaG9sZS5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjs7QUFFQSx3QkFBd0I7QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkRBQTJELEtBQUs7QUFDaEU7QUFDQTs7QUFFQTtBQUNBLG1GQUFtRixXQUFXLHNCQUFzQixXQUFXO0FBQy9IO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9jb21wb25lbnRzL2Rvb3Job2xlLmpzP2VjODIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBXQUxMID0gJ2Etd2FsbCc7XG5cbm1vZHVsZS5leHBvcnRzLkNvbXBvbmVudCA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZG9vcmhvbGUnLCB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmluZm8oJ2luaXRpYWxpemluZyBkb29yaG9sZScpO1xuXG4gICAgY29uc3QgcGFyZW50TmFtZSA9IHRoaXMuZWwucGFyZW50RWw/LmxvY2FsTmFtZTtcbiAgICBpZiAocGFyZW50TmFtZSAhPT0gV0FMTCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGBhLWRvb3Job2xlIGVsZW1lbnRzIG11c3QgaGF2ZSBhbiBcIiR7V0FMTH1cIiBwYXJlbnRgO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHRoaXMuZWwudmVydHMgPSBbXTtcbiAgICB0aGlzLmVsLmdldERvb3JsaW5rID0gKCkgPT4gdGhpcy5lbC5zY2VuZUVsLnF1ZXJ5U2VsZWN0b3IoYGEtZG9vcmxpbmtbZnJvbT1cIiMke3RoaXMuZWwuaWR9XCJdLCBhLWRvb3JsaW5rW3RvPVwiIyR7dGhpcy5lbC5pZH1cIl1gKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/doorhole.js\n");

/***/ }),

/***/ "./src/components/doorlink.js":
/*!************************************!*\
  !*** ./src/components/doorlink.js ***!
  \************************************/
/***/ ((module) => {

eval("\n\nconst SCENE = 'a-scene';\nconst WALL = 'a-wall';\n\nmodule.exports.Component = AFRAME.registerComponent('doorlink', {\n  schema: {\n    from: { type: 'selector' },\n    to: { type: 'selector' },\n    height: { type: 'number', default: 2.0 },\n    width: { type: 'number', default: 0.8 }\n  },\n  init: function () {\n    console.info('initializing doorlink');\n\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== SCENE && parentName !== WALL) {\n      const message = `a-doorlink elements must have an \"${SCENE}\" or \"${WALL}\" parent`;\n      throw new Error(message);\n    }\n\n    const doorlinkEl = this.el;\n    doorlinkEl.ceiling = doorlinkEl.querySelector('a-ceiling');\n    doorlinkEl.floor = doorlinkEl.querySelector('a-floor');\n    doorlinkEl.sides = doorlinkEl.querySelector('a-sides');\n  },\n  update: function () {\n    console.info('updating doorlink');\n    this.el.sceneEl.systems?.building?.buildDoorlink(this.el);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9kb29ybGluay5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBOztBQUVBLHdCQUF3QjtBQUN4QjtBQUNBLFlBQVksa0JBQWtCO0FBQzlCLFVBQVUsa0JBQWtCO0FBQzVCLGNBQWMsOEJBQThCO0FBQzVDLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkRBQTJELE1BQU0sUUFBUSxLQUFLO0FBQzlFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL2NvbXBvbmVudHMvZG9vcmxpbmsuanM/NGM0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IFNDRU5FID0gJ2Etc2NlbmUnO1xuY29uc3QgV0FMTCA9ICdhLXdhbGwnO1xuXG5tb2R1bGUuZXhwb3J0cy5Db21wb25lbnQgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2Rvb3JsaW5rJywge1xuICBzY2hlbWE6IHtcbiAgICBmcm9tOiB7IHR5cGU6ICdzZWxlY3RvcicgfSxcbiAgICB0bzogeyB0eXBlOiAnc2VsZWN0b3InIH0sXG4gICAgaGVpZ2h0OiB7IHR5cGU6ICdudW1iZXInLCBkZWZhdWx0OiAyLjAgfSxcbiAgICB3aWR0aDogeyB0eXBlOiAnbnVtYmVyJywgZGVmYXVsdDogMC44IH1cbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUuaW5mbygnaW5pdGlhbGl6aW5nIGRvb3JsaW5rJyk7XG5cbiAgICBjb25zdCBwYXJlbnROYW1lID0gdGhpcy5lbC5wYXJlbnRFbD8ubG9jYWxOYW1lO1xuICAgIGlmIChwYXJlbnROYW1lICE9PSBTQ0VORSAmJiBwYXJlbnROYW1lICE9PSBXQUxMKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYGEtZG9vcmxpbmsgZWxlbWVudHMgbXVzdCBoYXZlIGFuIFwiJHtTQ0VORX1cIiBvciBcIiR7V0FMTH1cIiBwYXJlbnRgO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGNvbnN0IGRvb3JsaW5rRWwgPSB0aGlzLmVsO1xuICAgIGRvb3JsaW5rRWwuY2VpbGluZyA9IGRvb3JsaW5rRWwucXVlcnlTZWxlY3RvcignYS1jZWlsaW5nJyk7XG4gICAgZG9vcmxpbmtFbC5mbG9vciA9IGRvb3JsaW5rRWwucXVlcnlTZWxlY3RvcignYS1mbG9vcicpO1xuICAgIGRvb3JsaW5rRWwuc2lkZXMgPSBkb29ybGlua0VsLnF1ZXJ5U2VsZWN0b3IoJ2Etc2lkZXMnKTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5pbmZvKCd1cGRhdGluZyBkb29ybGluaycpO1xuICAgIHRoaXMuZWwuc2NlbmVFbC5zeXN0ZW1zPy5idWlsZGluZz8uYnVpbGREb29ybGluayh0aGlzLmVsKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/doorlink.js\n");

/***/ }),

/***/ "./src/components/floor.js":
/*!*********************************!*\
  !*** ./src/components/floor.js ***!
  \*********************************/
/***/ ((module) => {

eval("\n\nconst DOORLINK = 'a-doorlink';\nconst ROOM = 'a-room';\n\nmodule.exports.Component = AFRAME.registerComponent('floor', {\n  init: function () {\n    console.info('initializing floor');\n\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== DOORLINK && parentName !== ROOM) {\n      const message = `a-floor elements must have an \"${DOORLINK}\" or \"${ROOM}\" parent`;\n      throw new Error(message);\n    }\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9mbG9vci5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBOztBQUVBLHdCQUF3QjtBQUN4QjtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3REFBd0QsU0FBUyxRQUFRLEtBQUs7QUFDOUU7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9jb21wb25lbnRzL2Zsb29yLmpzP2RlMzQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBET09STElOSyA9ICdhLWRvb3JsaW5rJztcbmNvbnN0IFJPT00gPSAnYS1yb29tJztcblxubW9kdWxlLmV4cG9ydHMuQ29tcG9uZW50ID0gQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdmbG9vcicsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUuaW5mbygnaW5pdGlhbGl6aW5nIGZsb29yJyk7XG5cbiAgICBjb25zdCBwYXJlbnROYW1lID0gdGhpcy5lbC5wYXJlbnRFbD8ubG9jYWxOYW1lO1xuICAgIGlmIChwYXJlbnROYW1lICE9PSBET09STElOSyAmJiBwYXJlbnROYW1lICE9PSBST09NKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYGEtZmxvb3IgZWxlbWVudHMgbXVzdCBoYXZlIGFuIFwiJHtET09STElOS31cIiBvciBcIiR7Uk9PTX1cIiBwYXJlbnRgO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/floor.js\n");

/***/ }),

/***/ "./src/components/index.js":
/*!*********************************!*\
  !*** ./src/components/index.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n__webpack_require__(/*! ./ceiling */ \"./src/components/ceiling.js\");\n__webpack_require__(/*! ./doorhole */ \"./src/components/doorhole.js\");\n__webpack_require__(/*! ./doorlink */ \"./src/components/doorlink.js\");\n__webpack_require__(/*! ./floor */ \"./src/components/floor.js\");\n__webpack_require__(/*! ./room */ \"./src/components/room.js\");\n__webpack_require__(/*! ./sides */ \"./src/components/sides.js\");\n__webpack_require__(/*! ./wall */ \"./src/components/wall.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixtQkFBTyxDQUFDLDhDQUFXO0FBQ25CLG1CQUFPLENBQUMsZ0RBQVk7QUFDcEIsbUJBQU8sQ0FBQyxnREFBWTtBQUNwQixtQkFBTyxDQUFDLDBDQUFTO0FBQ2pCLG1CQUFPLENBQUMsd0NBQVE7QUFDaEIsbUJBQU8sQ0FBQywwQ0FBUztBQUNqQixtQkFBTyxDQUFDLHdDQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL2NvbXBvbmVudHMvaW5kZXguanM/MmFmOSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vY2VpbGluZycpO1xucmVxdWlyZSgnLi9kb29yaG9sZScpO1xucmVxdWlyZSgnLi9kb29ybGluaycpO1xucmVxdWlyZSgnLi9mbG9vcicpO1xucmVxdWlyZSgnLi9yb29tJyk7XG5yZXF1aXJlKCcuL3NpZGVzJyk7XG5yZXF1aXJlKCcuL3dhbGwnKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/index.js\n");

/***/ }),

/***/ "./src/components/room.js":
/*!********************************!*\
  !*** ./src/components/room.js ***!
  \********************************/
/***/ ((module) => {

eval("\n\nmodule.exports.Component = AFRAME.registerComponent('room', {\n  schema: {\n    outside: { type: 'boolean' },\n    height: { type: 'number', default: 2.4 },\n    width: { type: 'number' },\n    length: { type: 'number' }\n  },\n  init: function () {\n    console.info('initializing room');\n\n    const roomEl = this.el;\n    const { length, width } = roomEl?.getAttribute('room');\n    const walls = Array.from(roomEl.querySelectorAll('a-wall'));\n\n    if ((width || length) && !(width && length)) {\n      const message = 'rooms with WIDTH must also have LENGTH (and vice versa)';\n      console.error(message);\n      throw new Error(message);\n    }\n\n    if (width && length && walls.length !== 4) {\n      const message = 'rooms with WIDTH and LENGTH must have four walls!';\n      console.error(message);\n      throw new Error(message);\n    }\n\n    roomEl.ceiling = roomEl.querySelector('a-ceiling');\n    roomEl.floor = roomEl.querySelector('a-floor');\n    roomEl.walls = walls;\n  },\n  update: function () {\n    console.info('updating room');\n    this.el.sceneEl.systems?.building?.buildRoom(this.el);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9yb29tLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLHdCQUF3QjtBQUN4QjtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDLGNBQWMsOEJBQThCO0FBQzVDLGFBQWEsZ0JBQWdCO0FBQzdCLGNBQWM7QUFDZCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL2NvbXBvbmVudHMvcm9vbS5qcz9jM2FhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMuQ29tcG9uZW50ID0gQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdyb29tJywge1xuICBzY2hlbWE6IHtcbiAgICBvdXRzaWRlOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgIGhlaWdodDogeyB0eXBlOiAnbnVtYmVyJywgZGVmYXVsdDogMi40IH0sXG4gICAgd2lkdGg6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICBsZW5ndGg6IHsgdHlwZTogJ251bWJlcicgfVxuICB9LFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5pbmZvKCdpbml0aWFsaXppbmcgcm9vbScpO1xuXG4gICAgY29uc3Qgcm9vbUVsID0gdGhpcy5lbDtcbiAgICBjb25zdCB7IGxlbmd0aCwgd2lkdGggfSA9IHJvb21FbD8uZ2V0QXR0cmlidXRlKCdyb29tJyk7XG4gICAgY29uc3Qgd2FsbHMgPSBBcnJheS5mcm9tKHJvb21FbC5xdWVyeVNlbGVjdG9yQWxsKCdhLXdhbGwnKSk7XG5cbiAgICBpZiAoKHdpZHRoIHx8IGxlbmd0aCkgJiYgISh3aWR0aCAmJiBsZW5ndGgpKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gJ3Jvb21zIHdpdGggV0lEVEggbXVzdCBhbHNvIGhhdmUgTEVOR1RIIChhbmQgdmljZSB2ZXJzYSknO1xuICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG5cbiAgICBpZiAod2lkdGggJiYgbGVuZ3RoICYmIHdhbGxzLmxlbmd0aCAhPT0gNCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICdyb29tcyB3aXRoIFdJRFRIIGFuZCBMRU5HVEggbXVzdCBoYXZlIGZvdXIgd2FsbHMhJztcbiAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcm9vbUVsLmNlaWxpbmcgPSByb29tRWwucXVlcnlTZWxlY3RvcignYS1jZWlsaW5nJyk7XG4gICAgcm9vbUVsLmZsb29yID0gcm9vbUVsLnF1ZXJ5U2VsZWN0b3IoJ2EtZmxvb3InKTtcbiAgICByb29tRWwud2FsbHMgPSB3YWxscztcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS5pbmZvKCd1cGRhdGluZyByb29tJyk7XG4gICAgdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXM/LmJ1aWxkaW5nPy5idWlsZFJvb20odGhpcy5lbCk7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/room.js\n");

/***/ }),

/***/ "./src/components/sides.js":
/*!*********************************!*\
  !*** ./src/components/sides.js ***!
  \*********************************/
/***/ ((module) => {

eval("\n\nconst DOORLINK = 'a-doorlink';\n\nmodule.exports.Component = AFRAME.registerComponent('sides', {\n  init: function () {\n    console.info('initializing sides');\n\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== DOORLINK) {\n      const message = `a-sides elements must have an \"${DOORLINK}\" parent`;\n      throw new Error(message);\n    }\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9zaWRlcy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjs7QUFFQSx3QkFBd0I7QUFDeEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0RBQXdELFNBQVM7QUFDakU7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9jb21wb25lbnRzL3NpZGVzLmpzPzg5ZmIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBET09STElOSyA9ICdhLWRvb3JsaW5rJztcblxubW9kdWxlLmV4cG9ydHMuQ29tcG9uZW50ID0gQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdzaWRlcycsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUuaW5mbygnaW5pdGlhbGl6aW5nIHNpZGVzJyk7XG5cbiAgICBjb25zdCBwYXJlbnROYW1lID0gdGhpcy5lbC5wYXJlbnRFbD8ubG9jYWxOYW1lO1xuICAgIGlmIChwYXJlbnROYW1lICE9PSBET09STElOSykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGBhLXNpZGVzIGVsZW1lbnRzIG11c3QgaGF2ZSBhbiBcIiR7RE9PUkxJTkt9XCIgcGFyZW50YDtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/sides.js\n");

/***/ }),

/***/ "./src/components/wall.js":
/*!********************************!*\
  !*** ./src/components/wall.js ***!
  \********************************/
/***/ ((module) => {

eval("\n\nconst ROOM = 'a-room';\n\nmodule.exports.Component = AFRAME.registerComponent('wall', {\n  schema: {\n    height: { type: 'number' }\n  },\n  init: function () {\n    console.info('initializing wall');\n\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== ROOM) {\n      const message = `a-wall elements must have an \"${ROOM}\" parent`;\n      throw new Error(message);\n    }\n\n    const doorholes = Array.from(this.el.querySelectorAll('a-doorhole'));\n    this.el.doorholes = doorholes.sort((a, b) => a?.object3D?.position?.x - b?.object3D?.position?.x);\n\n    this.el.getHeight = () => this.el.getAttribute('wall')?.height || this.el.parentEl?.getAttribute('room')?.height;\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy93YWxsLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBLHdCQUF3QjtBQUN4QjtBQUNBLGNBQWM7QUFDZCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdURBQXVELEtBQUs7QUFDNUQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL2NvbXBvbmVudHMvd2FsbC5qcz8yYWI3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgUk9PTSA9ICdhLXJvb20nO1xuXG5tb2R1bGUuZXhwb3J0cy5Db21wb25lbnQgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3dhbGwnLCB7XG4gIHNjaGVtYToge1xuICAgIGhlaWdodDogeyB0eXBlOiAnbnVtYmVyJyB9XG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmluZm8oJ2luaXRpYWxpemluZyB3YWxsJyk7XG5cbiAgICBjb25zdCBwYXJlbnROYW1lID0gdGhpcy5lbC5wYXJlbnRFbD8ubG9jYWxOYW1lO1xuICAgIGlmIChwYXJlbnROYW1lICE9PSBST09NKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYGEtd2FsbCBlbGVtZW50cyBtdXN0IGhhdmUgYW4gXCIke1JPT019XCIgcGFyZW50YDtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG5cbiAgICBjb25zdCBkb29yaG9sZXMgPSBBcnJheS5mcm9tKHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnYS1kb29yaG9sZScpKTtcbiAgICB0aGlzLmVsLmRvb3Job2xlcyA9IGRvb3Job2xlcy5zb3J0KChhLCBiKSA9PiBhPy5vYmplY3QzRD8ucG9zaXRpb24/LnggLSBiPy5vYmplY3QzRD8ucG9zaXRpb24/LngpO1xuXG4gICAgdGhpcy5lbC5nZXRIZWlnaHQgPSAoKSA9PiB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnd2FsbCcpPy5oZWlnaHQgfHwgdGhpcy5lbC5wYXJlbnRFbD8uZ2V0QXR0cmlidXRlKCdyb29tJyk/LmhlaWdodDtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/wall.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n__webpack_require__(/*! ./components */ \"./src/components/index.js\");\n__webpack_require__(/*! ./primitives */ \"./src/primitives/index.js\");\n__webpack_require__(/*! ./systems */ \"./src/systems/index.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsbUJBQU8sQ0FBQywrQ0FBYztBQUN0QixtQkFBTyxDQUFDLCtDQUFjO0FBQ3RCLG1CQUFPLENBQUMseUNBQVciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZnJhbWUtcm9vbS1jb21wb25lbnQvLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vY29tcG9uZW50cycpO1xucmVxdWlyZSgnLi9wcmltaXRpdmVzJyk7XG5yZXF1aXJlKCcuL3N5c3RlbXMnKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/primitives/a-ceiling.js":
/*!*************************************!*\
  !*** ./src/primitives/a-ceiling.js ***!
  \*************************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-ceiling', {\n  defaultComponents: { ceiling: {} },\n  mappings: {}\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLWNlaWxpbmcuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQSx1QkFBdUIsYUFBYTtBQUNwQztBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZnJhbWUtcm9vbS1jb21wb25lbnQvLi9zcmMvcHJpbWl0aXZlcy9hLWNlaWxpbmcuanM/NDA3YyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbkFGUkFNRS5yZWdpc3RlclByaW1pdGl2ZSgnYS1jZWlsaW5nJywge1xuICBkZWZhdWx0Q29tcG9uZW50czogeyBjZWlsaW5nOiB7fSB9LFxuICBtYXBwaW5nczoge31cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/primitives/a-ceiling.js\n");

/***/ }),

/***/ "./src/primitives/a-doorhole.js":
/*!**************************************!*\
  !*** ./src/primitives/a-doorhole.js ***!
  \**************************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-doorhole', {\n  defaultComponents: { doorhole: {} },\n  mappings: {}\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLWRvb3Job2xlLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsdUJBQXVCLGNBQWM7QUFDckM7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS1kb29yaG9sZS5qcz9hYzU0Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuQUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLWRvb3Job2xlJywge1xuICBkZWZhdWx0Q29tcG9uZW50czogeyBkb29yaG9sZToge30gfSxcbiAgbWFwcGluZ3M6IHt9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/primitives/a-doorhole.js\n");

/***/ }),

/***/ "./src/primitives/a-doorlink.js":
/*!**************************************!*\
  !*** ./src/primitives/a-doorlink.js ***!
  \**************************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-doorlink', {\n  defaultComponents: { doorlink: {} },\n  mappings: {\n    from: 'doorlink.from',\n    to: 'doorlink.to',\n    height: 'doorlink.height',\n    width: 'doorlink.width'\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLWRvb3JsaW5rLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsdUJBQXVCLGNBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9wcmltaXRpdmVzL2EtZG9vcmxpbmsuanM/ZDhiOSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbkFGUkFNRS5yZWdpc3RlclByaW1pdGl2ZSgnYS1kb29ybGluaycsIHtcbiAgZGVmYXVsdENvbXBvbmVudHM6IHsgZG9vcmxpbms6IHt9IH0sXG4gIG1hcHBpbmdzOiB7XG4gICAgZnJvbTogJ2Rvb3JsaW5rLmZyb20nLFxuICAgIHRvOiAnZG9vcmxpbmsudG8nLFxuICAgIGhlaWdodDogJ2Rvb3JsaW5rLmhlaWdodCcsXG4gICAgd2lkdGg6ICdkb29ybGluay53aWR0aCdcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/primitives/a-doorlink.js\n");

/***/ }),

/***/ "./src/primitives/a-floor.js":
/*!***********************************!*\
  !*** ./src/primitives/a-floor.js ***!
  \***********************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-floor', {\n  defaultComponents: { floor: {} },\n  mappings: {}\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLWZsb29yLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsdUJBQXVCLFdBQVc7QUFDbEM7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS1mbG9vci5qcz9lM2U0Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuQUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLWZsb29yJywge1xuICBkZWZhdWx0Q29tcG9uZW50czogeyBmbG9vcjoge30gfSxcbiAgbWFwcGluZ3M6IHt9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/primitives/a-floor.js\n");

/***/ }),

/***/ "./src/primitives/a-room.js":
/*!**********************************!*\
  !*** ./src/primitives/a-room.js ***!
  \**********************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-room', {\n  defaultComponents: { room: {} },\n  mappings: {\n    outside: 'room.outside',\n    height: 'room.height',\n    width: 'room.width',\n    length: 'room.length'\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLXJvb20uanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQSx1QkFBdUIsVUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS1yb29tLmpzP2M3ZjEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5BRlJBTUUucmVnaXN0ZXJQcmltaXRpdmUoJ2Etcm9vbScsIHtcbiAgZGVmYXVsdENvbXBvbmVudHM6IHsgcm9vbToge30gfSxcbiAgbWFwcGluZ3M6IHtcbiAgICBvdXRzaWRlOiAncm9vbS5vdXRzaWRlJyxcbiAgICBoZWlnaHQ6ICdyb29tLmhlaWdodCcsXG4gICAgd2lkdGg6ICdyb29tLndpZHRoJyxcbiAgICBsZW5ndGg6ICdyb29tLmxlbmd0aCdcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/primitives/a-room.js\n");

/***/ }),

/***/ "./src/primitives/a-sides.js":
/*!***********************************!*\
  !*** ./src/primitives/a-sides.js ***!
  \***********************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-sides', {\n  defaultComponents: { sides: {} },\n  mappings: {}\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLXNpZGVzLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsdUJBQXVCLFdBQVc7QUFDbEM7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS1zaWRlcy5qcz9kNjAyIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuQUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLXNpZGVzJywge1xuICBkZWZhdWx0Q29tcG9uZW50czogeyBzaWRlczoge30gfSxcbiAgbWFwcGluZ3M6IHt9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/primitives/a-sides.js\n");

/***/ }),

/***/ "./src/primitives/a-wall.js":
/*!**********************************!*\
  !*** ./src/primitives/a-wall.js ***!
  \**********************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-wall', {\n  defaultComponents: { wall: {} },\n  mappings: {\n    height: 'wall.height'\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLXdhbGwuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQSx1QkFBdUIsVUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS13YWxsLmpzPzY2NmEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5BRlJBTUUucmVnaXN0ZXJQcmltaXRpdmUoJ2Etd2FsbCcsIHtcbiAgZGVmYXVsdENvbXBvbmVudHM6IHsgd2FsbDoge30gfSxcbiAgbWFwcGluZ3M6IHtcbiAgICBoZWlnaHQ6ICd3YWxsLmhlaWdodCdcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/primitives/a-wall.js\n");

/***/ }),

/***/ "./src/primitives/index.js":
/*!*********************************!*\
  !*** ./src/primitives/index.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n__webpack_require__(/*! ./a-ceiling */ \"./src/primitives/a-ceiling.js\");\n__webpack_require__(/*! ./a-doorhole */ \"./src/primitives/a-doorhole.js\");\n__webpack_require__(/*! ./a-doorlink */ \"./src/primitives/a-doorlink.js\");\n__webpack_require__(/*! ./a-floor */ \"./src/primitives/a-floor.js\");\n__webpack_require__(/*! ./a-room */ \"./src/primitives/a-room.js\");\n__webpack_require__(/*! ./a-sides */ \"./src/primitives/a-sides.js\");\n__webpack_require__(/*! ./a-wall */ \"./src/primitives/a-wall.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixtQkFBTyxDQUFDLGtEQUFhO0FBQ3JCLG1CQUFPLENBQUMsb0RBQWM7QUFDdEIsbUJBQU8sQ0FBQyxvREFBYztBQUN0QixtQkFBTyxDQUFDLDhDQUFXO0FBQ25CLG1CQUFPLENBQUMsNENBQVU7QUFDbEIsbUJBQU8sQ0FBQyw4Q0FBVztBQUNuQixtQkFBTyxDQUFDLDRDQUFVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvaW5kZXguanM/ZjJhYiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vYS1jZWlsaW5nJyk7XG5yZXF1aXJlKCcuL2EtZG9vcmhvbGUnKTtcbnJlcXVpcmUoJy4vYS1kb29ybGluaycpO1xucmVxdWlyZSgnLi9hLWZsb29yJyk7XG5yZXF1aXJlKCcuL2Etcm9vbScpO1xucmVxdWlyZSgnLi9hLXNpZGVzJyk7XG5yZXF1aXJlKCcuL2Etd2FsbCcpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/primitives/index.js\n");

/***/ }),

/***/ "./src/systems/building.js":
/*!*********************************!*\
  !*** ./src/systems/building.js ***!
  \*********************************/
/***/ (() => {

eval("\n\nconst HAIR = 0.0001;\n\nconst flipGeometry = (geom) => {\n  const indices = geom.getIndex().array;\n  for (let i = 0; i < indices.length; i += 3) {\n    const tempIndex = indices[i + 2];\n    indices[i + 2] = indices[i + 1];\n    indices[i + 1] = tempIndex;\n  }\n\n  geom.getIndex().needsUpdate = true;\n};\n\nconst makeGeometryUvs = (geom, callback) => {\n  const indices = geom.getIndex().array;\n  const uvs = [];\n  for (const vertexIndex of indices) {\n    const vertex = new THREE.Vector3(\n      geom.attributes.position.getX(vertexIndex),\n      geom.attributes.position.getY(vertexIndex),\n      geom.attributes.position.getZ(vertexIndex)\n    );\n\n    const [u, v] = callback(vertex, vertexIndex % 3);\n    uvs[vertexIndex * 2 + 0] = u;\n    uvs[vertexIndex * 2 + 1] = v;\n  }\n\n  geom.setAttribute('uv', new THREE.BufferAttribute(new Float32Array(uvs), 2));\n};\n\nconst makePlaneUvs = (geom, uKey, vKey, uMult, vMult) => {\n  makeGeometryUvs(geom, (point) => {\n    return [\n      point[uKey] * uMult,\n      point[vKey] * vMult\n    ];\n  });\n};\n\nconst finishGeometry = (geom) => {\n  geom.computeVertexNormals();\n  geom.computeBoundingBox();\n  geom.computeBoundingSphere();\n};\n\nconst addWorldVert = (wall, hole, ptX, ptY) => {\n  const tempPos = new THREE.Vector3(ptX, ptY, 0);\n  wall.object3D.localToWorld(tempPos);\n  hole.verts.push(tempPos);\n};\n\nconst positionDoorhole = (doorholeEl) => {\n  const doorlinkEl = doorholeEl.getDoorlink();\n  const wallEl = doorholeEl.parentEl;\n  const nextWallEl = wallEl?.nextWallEl;\n  if (!doorlinkEl || !nextWallEl) { return; }\n\n  const wallWorldPosition = new THREE.Vector3();\n  wallEl.object3D.getWorldPosition(wallWorldPosition);\n\n  const nextWallWorldPosition = new THREE.Vector3();\n  nextWallEl.object3D.getWorldPosition(nextWallWorldPosition);\n\n  const doorlinkWorldPosition = new THREE.Vector3();\n  doorlinkEl.object3D.getWorldPosition(doorlinkWorldPosition);\n\n  const doorlinkGapX = doorlinkWorldPosition.x - wallWorldPosition.x;\n  const doorlinkGapZ = doorlinkWorldPosition.z - wallWorldPosition.z;\n\n  const wallGapX = nextWallWorldPosition.x - wallWorldPosition.x;\n  const wallGapZ = nextWallWorldPosition.z - wallWorldPosition.z;\n\n  const wallAngle = Math.atan2(wallGapZ, wallGapX);\n  const wallLength = Math.sqrt(wallGapX * wallGapX + wallGapZ * wallGapZ);\n\n  const doorHalf = doorlinkEl.getAttribute('doorlink')?.width / 2;\n\n  let localLinkX = doorlinkGapX * Math.cos(-wallAngle) - doorlinkGapZ * Math.sin(-wallAngle);\n  localLinkX = Math.max(localLinkX, doorHalf + HAIR);\n  localLinkX = Math.min(localLinkX, wallLength - doorHalf - HAIR);\n\n  // var localLinkZ = doorlinkGapX*Math.sin(-wallAngle) + doorlinkGapZ*Math.cos(-wallAngle);\n\n  doorholeEl.object3D.position.set(localLinkX, 0, 0);\n};\n\nconst sortWalls = (walls, isOutside) => {\n  let cwSum = 0;\n  for (let i = 0; i < walls.length; i++) {\n    const wallEl = walls[i];\n    const nextWallEl = walls[(i + 1) % walls.length];\n\n    const { x: wallX, z: wallZ } = wallEl.object3D.position;\n    const { x: nextWallX, z: nextWallZ } = nextWallEl.object3D.position;\n\n    cwSum += (nextWallX - wallX) * (nextWallZ + wallZ);\n  }\n\n  let shouldReverse = false;\n  if (cwSum > 0) { shouldReverse = !shouldReverse; }\n  if (isOutside) { shouldReverse = !shouldReverse; }\n  if (shouldReverse) { walls.reverse(); }\n};\n\nconst buildCap = (walls, cap, isCeiling, isOutside) => {\n  const capShape = new THREE.Shape();\n  for (let i = 0; i < walls.length; i++) {\n    const wallEl = walls[i];\n    const ptX = wallEl.object3D.position.x;\n    const ptZ = wallEl.object3D.position.z;\n    if (i) {\n      capShape.lineTo(ptX, ptZ);\n    } else {\n      capShape.moveTo(ptX, ptZ);\n    }\n  }\n\n  const capGeom = new THREE.ShapeGeometry(capShape);\n  for (let i = 0; i < walls.length; i++) {\n    const wallEl = walls[i];\n    const curVert = new THREE.Vector3(\n      capGeom.attributes.position.getX(i),\n      capGeom.attributes.position.getY(i),\n      capGeom.attributes.position.getZ(i)\n    );\n    curVert.set(curVert.x, wallEl.object3D.position.y, curVert.y);\n    if (isCeiling) { curVert.y += wallEl.getHeight(); }\n    capGeom.attributes.position.setXYZ(i, curVert.x, curVert.y, curVert.z);\n  }\n\n  let shouldReverse = false;\n  if (!isCeiling) { shouldReverse = !shouldReverse; }\n  if (isOutside) { shouldReverse = !shouldReverse; }\n  if (shouldReverse) { flipGeometry(capGeom); }\n\n  makePlaneUvs(capGeom, 'x', 'z', isCeiling ? 1 : -1, 1);\n  finishGeometry(capGeom);\n\n  if (!cap.myMeshes) { cap.myMeshes = []; }\n\n  const typeLabel = isCeiling ? 'ceiling' : 'floor';\n  const myMat = cap?.components?.material?.material || cap?.parentEl?.components?.material?.material;\n  if (cap.myMeshes[typeLabel]) {\n    cap.myMeshes[typeLabel].geometry = capGeom;\n    cap.myMeshes[typeLabel].material = myMat;\n  } else {\n    cap.myMeshes[typeLabel] = new THREE.Mesh(capGeom, myMat);\n    cap.setObject3D(typeLabel, cap.myMeshes[typeLabel]);\n  }\n};\n\nconst buildRoom = (roomEl) => {\n  const { outside, length, width } = roomEl?.getAttribute('room');\n  const walls = roomEl?.walls;\n\n  if (width && length) {\n    walls[0].object3D.position.set(0, 0, 0);\n    walls[1].object3D.position.set(width, 0, 0);\n    walls[2].object3D.position.set(width, 0, length);\n    walls[3].object3D.position.set(0, 0, length);\n  }\n\n  sortWalls(walls, outside);\n\n  // build walls\n  for (let i = 0; i < walls.length; i++) {\n    const wallEl = walls[i];\n    const nextWallEl = wallEl.nextWallEl = walls[(i + 1) % walls.length];\n\n    const wallGapX = nextWallEl.object3D.position.x - wallEl.object3D.position.x;\n    const wallGapY = nextWallEl.object3D.position.y - wallEl.object3D.position.y;\n    const wallGapZ = nextWallEl.object3D.position.z - wallEl.object3D.position.z;\n\n    const heightGap = nextWallEl.getHeight() - wallEl.getHeight();\n    const wallAngle = Math.atan2(wallGapZ, wallGapX);\n    const wallLength = Math.sqrt(wallGapX * wallGapX + wallGapZ * wallGapZ);\n\n    wallEl.object3D.rotation.y = THREE.MathUtils.degToRad(-wallAngle / Math.PI * 180);\n\n    const wallShape = new THREE.Shape();\n    wallShape.moveTo(0, wallEl.getHeight());\n    wallShape.lineTo(0, 0);\n\n    // build doorholes\n    for (const doorholeEl of wallEl.doorholes) {\n      positionDoorhole(doorholeEl);\n\n      const doorlinkEl = doorholeEl.getDoorlink();\n      if (!doorlinkEl) { continue; }\n\n      for (let holeSide = -1; holeSide <= 1; holeSide += 2) {\n        const ptX = doorholeEl.object3D.position.x + doorlinkEl.getAttribute('doorlink').width / 2 * holeSide;\n        const floorY = (ptX / wallLength) * wallGapY;\n        let topY = floorY + doorlinkEl.getAttribute('doorlink').height;\n\n        const curCeil = wallEl.getHeight() + (ptX / wallLength) * heightGap;\n        const maxTopY = floorY + curCeil - HAIR;// will always be a seam, but, I'm not bothering to rewrite just for that\n        if (topY > maxTopY) { topY = maxTopY; }\n\n        addWorldVert(wallEl, doorholeEl, ptX, floorY);\n        addWorldVert(wallEl, doorholeEl, ptX, topY);\n\n        if (holeSide < 0) {\n          wallShape.lineTo(ptX, floorY);\n          wallShape.lineTo(ptX, topY);\n        } else {\n          wallShape.lineTo(ptX, topY);\n          wallShape.lineTo(ptX, floorY);\n        }\n      }\n    }\n\n    wallShape.lineTo(\n      wallLength,\n      nextWallEl?.object3D?.position?.y - wallEl?.object3D?.position?.y\n    );\n    wallShape.lineTo(\n      wallLength,\n      (nextWallEl?.object3D?.position?.y - wallEl?.object3D?.position?.y) + nextWallEl.getHeight()\n    );\n\n    const wallGeom = new THREE.ShapeGeometry(wallShape);\n    makePlaneUvs(wallGeom, 'x', 'y', 1, 1);\n    finishGeometry(wallGeom);\n    const myMat = wallEl?.components?.material?.material || wallEl?.parentEl?.components?.material?.material;\n    if (wallEl.myMesh) {\n      wallEl.myMesh.geometry = wallGeom;\n      wallEl.myMesh.material = myMat;\n    } else {\n      wallEl.myMesh = new THREE.Mesh(wallGeom, myMat);\n      wallEl.setObject3D('wallMesh', wallEl.myMesh);\n    }\n  }\n\n  // build ceiling and floor\n  buildCap(walls, roomEl?.floor, false, outside);\n  buildCap(walls, roomEl?.ceiling, true, outside);\n};\n\nconst buildDoorlink = (doorlinkEl) => {\n  const { from, to } = doorlinkEl.getAttribute('doorlink');\n  const fromVerts = from?.verts;\n  const toVerts = to?.verts;\n  if (!fromVerts || !toVerts) { return; }\n\n  for (const doorLinkChild of doorlinkEl.children) {\n    if (!doorLinkChild.components) { continue; }\n\n    const types = ['sides', 'floor', 'ceiling'];\n    for (const curType of types) {\n      if (!doorLinkChild.components[curType]) { continue; }\n\n      const myMat = doorLinkChild?.components?.material?.material || doorLinkChild?.parentEl?.components?.material?.material;\n\n      if (!doorLinkChild.myGeoms) { doorLinkChild.myGeoms = []; }\n      if (!doorLinkChild.myGeoms[curType]) {\n        const curGeom = new THREE.BufferGeometry();\n        doorLinkChild.myGeoms[curType] = curGeom;\n        const myMesh = new THREE.Mesh(curGeom, myMat);\n        curGeom.meshRef = myMesh;\n        doorLinkChild.setObject3D(curType, myMesh);\n        const indexArray = [];\n        indexArray.push(0, 1, 2, 1, 3, 2);\n        if (curType === 'sides') { indexArray.push(4, 5, 6, 5, 7, 6); }\n        curGeom.setIndex(indexArray);\n      }\n\n      const curGeom = doorLinkChild.myGeoms[curType];\n      curGeom.meshRef.material = myMat;\n      const positionArray = [];\n\n      const addWorldVertex = (vertex) => {\n        const point = vertex.clone();\n        doorLinkChild.object3D.worldToLocal(point);\n        positionArray.push(point.x, point.y, point.z);\n      };\n\n      const commitVertices = () => {\n        curGeom.setAttribute('position', new THREE.BufferAttribute(new Float32Array(positionArray), 3));\n      };\n\n      switch (curType) {\n        case 'floor':\n\n          addWorldVertex(toVerts[0]);\n          addWorldVertex(toVerts[2]);\n          addWorldVertex(fromVerts[2]);\n          addWorldVertex(fromVerts[0]);\n\n          commitVertices();\n\n          makeGeometryUvs(curGeom, (point, vertIndex) => {\n            return [\n              1 - (vertIndex % 2),\n              1 - Math.floor(vertIndex / 2)\n            ];\n          });\n\n          break;\n        case 'ceiling':\n\n          addWorldVertex(toVerts[3]);\n          addWorldVertex(toVerts[1]);\n          addWorldVertex(fromVerts[1]);\n          addWorldVertex(fromVerts[3]);\n\n          commitVertices();\n\n          makeGeometryUvs(curGeom, (point, vertIndex) => {\n            return [\n              vertIndex % 2,\n              1 - Math.floor(vertIndex / 2)\n            ];\n          });\n\n          break;\n        case 'sides':\n\n          addWorldVertex(toVerts[2]);\n          addWorldVertex(toVerts[3]);\n          addWorldVertex(fromVerts[0]);\n          addWorldVertex(fromVerts[1]);\n\n          addWorldVertex(fromVerts[2]);\n          addWorldVertex(fromVerts[3]);\n          addWorldVertex(toVerts[0]);\n          addWorldVertex(toVerts[1]);\n\n          commitVertices();\n\n          makeGeometryUvs(curGeom, (point, vertIndex) => {\n            const uv = [];\n            uv[0] = Math.floor(vertIndex / 2);\n            uv[1] = vertIndex % 2;\n            if (vertIndex < 4) { uv[0] = 1 - uv[0]; }\n            return uv;\n          });\n\n          break;\n      }\n      finishGeometry(curGeom);\n    }\n  }\n};\n\nAFRAME.registerSystem('building', {\n  init: function () {\n    console.log('initializing building');\n\n    this.el.rooms = this.el.querySelectorAll('a-room');\n    this.el.doorlinks = this.el.querySelectorAll('a-doorlink');\n    this.el.updateReady = false;\n\n    this.el.addEventListener('loaded', this.initialBuild);\n  },\n  initialBuild: function () {\n    console.info('building...');\n\n    this.object3D.updateMatrixWorld();\n\n    for (const roomEl of this.rooms) {\n      buildRoom(roomEl);\n    }\n\n    for (const doorlinkEl of this.doorlinks) {\n      buildDoorlink(doorlinkEl);\n    }\n\n    this.updateReady = true;\n  },\n  buildRoom: function (roomEl) {\n    if (this.el.updateReady) buildRoom(roomEl);\n  },\n  buildDoorlink: function (doorlinkEl) {\n    if (this.el.updateReady) buildDoorlink(doorlinkEl);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtcy9idWlsZGluZy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLG9CQUFvQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7O0FBRXBDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7O0FBRUEsWUFBWSxxQkFBcUI7QUFDakMsWUFBWSw2QkFBNkI7O0FBRXpDO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUI7QUFDbkIsbUJBQW1CO0FBQ25CLHVCQUF1QjtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQjtBQUNwQixtQkFBbUI7QUFDbkIsdUJBQXVCOztBQUV2QjtBQUNBOztBQUVBLHVCQUF1Qjs7QUFFdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUseUJBQXlCO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUI7O0FBRXpCLDhCQUE4QixlQUFlO0FBQzdDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdEQUFnRDtBQUNoRCw4QkFBOEI7O0FBRTlCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUsV0FBVztBQUNyQjtBQUNBO0FBQ0EsZ0NBQWdDOztBQUVoQztBQUNBLHFDQUFxQzs7QUFFckM7QUFDQTtBQUNBLGdEQUFnRDs7QUFFaEQ7O0FBRUEsb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZnJhbWUtcm9vbS1jb21wb25lbnQvLi9zcmMvc3lzdGVtcy9idWlsZGluZy5qcz8xNzRkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgSEFJUiA9IDAuMDAwMTtcblxuY29uc3QgZmxpcEdlb21ldHJ5ID0gKGdlb20pID0+IHtcbiAgY29uc3QgaW5kaWNlcyA9IGdlb20uZ2V0SW5kZXgoKS5hcnJheTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY29uc3QgdGVtcEluZGV4ID0gaW5kaWNlc1tpICsgMl07XG4gICAgaW5kaWNlc1tpICsgMl0gPSBpbmRpY2VzW2kgKyAxXTtcbiAgICBpbmRpY2VzW2kgKyAxXSA9IHRlbXBJbmRleDtcbiAgfVxuXG4gIGdlb20uZ2V0SW5kZXgoKS5uZWVkc1VwZGF0ZSA9IHRydWU7XG59O1xuXG5jb25zdCBtYWtlR2VvbWV0cnlVdnMgPSAoZ2VvbSwgY2FsbGJhY2spID0+IHtcbiAgY29uc3QgaW5kaWNlcyA9IGdlb20uZ2V0SW5kZXgoKS5hcnJheTtcbiAgY29uc3QgdXZzID0gW107XG4gIGZvciAoY29uc3QgdmVydGV4SW5kZXggb2YgaW5kaWNlcykge1xuICAgIGNvbnN0IHZlcnRleCA9IG5ldyBUSFJFRS5WZWN0b3IzKFxuICAgICAgZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmdldFgodmVydGV4SW5kZXgpLFxuICAgICAgZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmdldFkodmVydGV4SW5kZXgpLFxuICAgICAgZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmdldFoodmVydGV4SW5kZXgpXG4gICAgKTtcblxuICAgIGNvbnN0IFt1LCB2XSA9IGNhbGxiYWNrKHZlcnRleCwgdmVydGV4SW5kZXggJSAzKTtcbiAgICB1dnNbdmVydGV4SW5kZXggKiAyICsgMF0gPSB1O1xuICAgIHV2c1t2ZXJ0ZXhJbmRleCAqIDIgKyAxXSA9IHY7XG4gIH1cblxuICBnZW9tLnNldEF0dHJpYnV0ZSgndXYnLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodXZzKSwgMikpO1xufTtcblxuY29uc3QgbWFrZVBsYW5lVXZzID0gKGdlb20sIHVLZXksIHZLZXksIHVNdWx0LCB2TXVsdCkgPT4ge1xuICBtYWtlR2VvbWV0cnlVdnMoZ2VvbSwgKHBvaW50KSA9PiB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHBvaW50W3VLZXldICogdU11bHQsXG4gICAgICBwb2ludFt2S2V5XSAqIHZNdWx0XG4gICAgXTtcbiAgfSk7XG59O1xuXG5jb25zdCBmaW5pc2hHZW9tZXRyeSA9IChnZW9tKSA9PiB7XG4gIGdlb20uY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcbiAgZ2VvbS5jb21wdXRlQm91bmRpbmdCb3goKTtcbiAgZ2VvbS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTtcbn07XG5cbmNvbnN0IGFkZFdvcmxkVmVydCA9ICh3YWxsLCBob2xlLCBwdFgsIHB0WSkgPT4ge1xuICBjb25zdCB0ZW1wUG9zID0gbmV3IFRIUkVFLlZlY3RvcjMocHRYLCBwdFksIDApO1xuICB3YWxsLm9iamVjdDNELmxvY2FsVG9Xb3JsZCh0ZW1wUG9zKTtcbiAgaG9sZS52ZXJ0cy5wdXNoKHRlbXBQb3MpO1xufTtcblxuY29uc3QgcG9zaXRpb25Eb29yaG9sZSA9IChkb29yaG9sZUVsKSA9PiB7XG4gIGNvbnN0IGRvb3JsaW5rRWwgPSBkb29yaG9sZUVsLmdldERvb3JsaW5rKCk7XG4gIGNvbnN0IHdhbGxFbCA9IGRvb3Job2xlRWwucGFyZW50RWw7XG4gIGNvbnN0IG5leHRXYWxsRWwgPSB3YWxsRWw/Lm5leHRXYWxsRWw7XG4gIGlmICghZG9vcmxpbmtFbCB8fCAhbmV4dFdhbGxFbCkgeyByZXR1cm47IH1cblxuICBjb25zdCB3YWxsV29ybGRQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIHdhbGxFbC5vYmplY3QzRC5nZXRXb3JsZFBvc2l0aW9uKHdhbGxXb3JsZFBvc2l0aW9uKTtcblxuICBjb25zdCBuZXh0V2FsbFdvcmxkUG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICBuZXh0V2FsbEVsLm9iamVjdDNELmdldFdvcmxkUG9zaXRpb24obmV4dFdhbGxXb3JsZFBvc2l0aW9uKTtcblxuICBjb25zdCBkb29ybGlua1dvcmxkUG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICBkb29ybGlua0VsLm9iamVjdDNELmdldFdvcmxkUG9zaXRpb24oZG9vcmxpbmtXb3JsZFBvc2l0aW9uKTtcblxuICBjb25zdCBkb29ybGlua0dhcFggPSBkb29ybGlua1dvcmxkUG9zaXRpb24ueCAtIHdhbGxXb3JsZFBvc2l0aW9uLng7XG4gIGNvbnN0IGRvb3JsaW5rR2FwWiA9IGRvb3JsaW5rV29ybGRQb3NpdGlvbi56IC0gd2FsbFdvcmxkUG9zaXRpb24uejtcblxuICBjb25zdCB3YWxsR2FwWCA9IG5leHRXYWxsV29ybGRQb3NpdGlvbi54IC0gd2FsbFdvcmxkUG9zaXRpb24ueDtcbiAgY29uc3Qgd2FsbEdhcFogPSBuZXh0V2FsbFdvcmxkUG9zaXRpb24ueiAtIHdhbGxXb3JsZFBvc2l0aW9uLno7XG5cbiAgY29uc3Qgd2FsbEFuZ2xlID0gTWF0aC5hdGFuMih3YWxsR2FwWiwgd2FsbEdhcFgpO1xuICBjb25zdCB3YWxsTGVuZ3RoID0gTWF0aC5zcXJ0KHdhbGxHYXBYICogd2FsbEdhcFggKyB3YWxsR2FwWiAqIHdhbGxHYXBaKTtcblxuICBjb25zdCBkb29ySGFsZiA9IGRvb3JsaW5rRWwuZ2V0QXR0cmlidXRlKCdkb29ybGluaycpPy53aWR0aCAvIDI7XG5cbiAgbGV0IGxvY2FsTGlua1ggPSBkb29ybGlua0dhcFggKiBNYXRoLmNvcygtd2FsbEFuZ2xlKSAtIGRvb3JsaW5rR2FwWiAqIE1hdGguc2luKC13YWxsQW5nbGUpO1xuICBsb2NhbExpbmtYID0gTWF0aC5tYXgobG9jYWxMaW5rWCwgZG9vckhhbGYgKyBIQUlSKTtcbiAgbG9jYWxMaW5rWCA9IE1hdGgubWluKGxvY2FsTGlua1gsIHdhbGxMZW5ndGggLSBkb29ySGFsZiAtIEhBSVIpO1xuXG4gIC8vIHZhciBsb2NhbExpbmtaID0gZG9vcmxpbmtHYXBYKk1hdGguc2luKC13YWxsQW5nbGUpICsgZG9vcmxpbmtHYXBaKk1hdGguY29zKC13YWxsQW5nbGUpO1xuXG4gIGRvb3Job2xlRWwub2JqZWN0M0QucG9zaXRpb24uc2V0KGxvY2FsTGlua1gsIDAsIDApO1xufTtcblxuY29uc3Qgc29ydFdhbGxzID0gKHdhbGxzLCBpc091dHNpZGUpID0+IHtcbiAgbGV0IGN3U3VtID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YWxscy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHdhbGxFbCA9IHdhbGxzW2ldO1xuICAgIGNvbnN0IG5leHRXYWxsRWwgPSB3YWxsc1soaSArIDEpICUgd2FsbHMubGVuZ3RoXTtcblxuICAgIGNvbnN0IHsgeDogd2FsbFgsIHo6IHdhbGxaIH0gPSB3YWxsRWwub2JqZWN0M0QucG9zaXRpb247XG4gICAgY29uc3QgeyB4OiBuZXh0V2FsbFgsIHo6IG5leHRXYWxsWiB9ID0gbmV4dFdhbGxFbC5vYmplY3QzRC5wb3NpdGlvbjtcblxuICAgIGN3U3VtICs9IChuZXh0V2FsbFggLSB3YWxsWCkgKiAobmV4dFdhbGxaICsgd2FsbFopO1xuICB9XG5cbiAgbGV0IHNob3VsZFJldmVyc2UgPSBmYWxzZTtcbiAgaWYgKGN3U3VtID4gMCkgeyBzaG91bGRSZXZlcnNlID0gIXNob3VsZFJldmVyc2U7IH1cbiAgaWYgKGlzT3V0c2lkZSkgeyBzaG91bGRSZXZlcnNlID0gIXNob3VsZFJldmVyc2U7IH1cbiAgaWYgKHNob3VsZFJldmVyc2UpIHsgd2FsbHMucmV2ZXJzZSgpOyB9XG59O1xuXG5jb25zdCBidWlsZENhcCA9ICh3YWxscywgY2FwLCBpc0NlaWxpbmcsIGlzT3V0c2lkZSkgPT4ge1xuICBjb25zdCBjYXBTaGFwZSA9IG5ldyBUSFJFRS5TaGFwZSgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHdhbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgd2FsbEVsID0gd2FsbHNbaV07XG4gICAgY29uc3QgcHRYID0gd2FsbEVsLm9iamVjdDNELnBvc2l0aW9uLng7XG4gICAgY29uc3QgcHRaID0gd2FsbEVsLm9iamVjdDNELnBvc2l0aW9uLno7XG4gICAgaWYgKGkpIHtcbiAgICAgIGNhcFNoYXBlLmxpbmVUbyhwdFgsIHB0Wik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhcFNoYXBlLm1vdmVUbyhwdFgsIHB0Wik7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY2FwR2VvbSA9IG5ldyBUSFJFRS5TaGFwZUdlb21ldHJ5KGNhcFNoYXBlKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YWxscy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHdhbGxFbCA9IHdhbGxzW2ldO1xuICAgIGNvbnN0IGN1clZlcnQgPSBuZXcgVEhSRUUuVmVjdG9yMyhcbiAgICAgIGNhcEdlb20uYXR0cmlidXRlcy5wb3NpdGlvbi5nZXRYKGkpLFxuICAgICAgY2FwR2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmdldFkoaSksXG4gICAgICBjYXBHZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uZ2V0WihpKVxuICAgICk7XG4gICAgY3VyVmVydC5zZXQoY3VyVmVydC54LCB3YWxsRWwub2JqZWN0M0QucG9zaXRpb24ueSwgY3VyVmVydC55KTtcbiAgICBpZiAoaXNDZWlsaW5nKSB7IGN1clZlcnQueSArPSB3YWxsRWwuZ2V0SGVpZ2h0KCk7IH1cbiAgICBjYXBHZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uc2V0WFlaKGksIGN1clZlcnQueCwgY3VyVmVydC55LCBjdXJWZXJ0LnopO1xuICB9XG5cbiAgbGV0IHNob3VsZFJldmVyc2UgPSBmYWxzZTtcbiAgaWYgKCFpc0NlaWxpbmcpIHsgc2hvdWxkUmV2ZXJzZSA9ICFzaG91bGRSZXZlcnNlOyB9XG4gIGlmIChpc091dHNpZGUpIHsgc2hvdWxkUmV2ZXJzZSA9ICFzaG91bGRSZXZlcnNlOyB9XG4gIGlmIChzaG91bGRSZXZlcnNlKSB7IGZsaXBHZW9tZXRyeShjYXBHZW9tKTsgfVxuXG4gIG1ha2VQbGFuZVV2cyhjYXBHZW9tLCAneCcsICd6JywgaXNDZWlsaW5nID8gMSA6IC0xLCAxKTtcbiAgZmluaXNoR2VvbWV0cnkoY2FwR2VvbSk7XG5cbiAgaWYgKCFjYXAubXlNZXNoZXMpIHsgY2FwLm15TWVzaGVzID0gW107IH1cblxuICBjb25zdCB0eXBlTGFiZWwgPSBpc0NlaWxpbmcgPyAnY2VpbGluZycgOiAnZmxvb3InO1xuICBjb25zdCBteU1hdCA9IGNhcD8uY29tcG9uZW50cz8ubWF0ZXJpYWw/Lm1hdGVyaWFsIHx8IGNhcD8ucGFyZW50RWw/LmNvbXBvbmVudHM/Lm1hdGVyaWFsPy5tYXRlcmlhbDtcbiAgaWYgKGNhcC5teU1lc2hlc1t0eXBlTGFiZWxdKSB7XG4gICAgY2FwLm15TWVzaGVzW3R5cGVMYWJlbF0uZ2VvbWV0cnkgPSBjYXBHZW9tO1xuICAgIGNhcC5teU1lc2hlc1t0eXBlTGFiZWxdLm1hdGVyaWFsID0gbXlNYXQ7XG4gIH0gZWxzZSB7XG4gICAgY2FwLm15TWVzaGVzW3R5cGVMYWJlbF0gPSBuZXcgVEhSRUUuTWVzaChjYXBHZW9tLCBteU1hdCk7XG4gICAgY2FwLnNldE9iamVjdDNEKHR5cGVMYWJlbCwgY2FwLm15TWVzaGVzW3R5cGVMYWJlbF0pO1xuICB9XG59O1xuXG5jb25zdCBidWlsZFJvb20gPSAocm9vbUVsKSA9PiB7XG4gIGNvbnN0IHsgb3V0c2lkZSwgbGVuZ3RoLCB3aWR0aCB9ID0gcm9vbUVsPy5nZXRBdHRyaWJ1dGUoJ3Jvb20nKTtcbiAgY29uc3Qgd2FsbHMgPSByb29tRWw/LndhbGxzO1xuXG4gIGlmICh3aWR0aCAmJiBsZW5ndGgpIHtcbiAgICB3YWxsc1swXS5vYmplY3QzRC5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7XG4gICAgd2FsbHNbMV0ub2JqZWN0M0QucG9zaXRpb24uc2V0KHdpZHRoLCAwLCAwKTtcbiAgICB3YWxsc1syXS5vYmplY3QzRC5wb3NpdGlvbi5zZXQod2lkdGgsIDAsIGxlbmd0aCk7XG4gICAgd2FsbHNbM10ub2JqZWN0M0QucG9zaXRpb24uc2V0KDAsIDAsIGxlbmd0aCk7XG4gIH1cblxuICBzb3J0V2FsbHMod2FsbHMsIG91dHNpZGUpO1xuXG4gIC8vIGJ1aWxkIHdhbGxzXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgd2FsbHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB3YWxsRWwgPSB3YWxsc1tpXTtcbiAgICBjb25zdCBuZXh0V2FsbEVsID0gd2FsbEVsLm5leHRXYWxsRWwgPSB3YWxsc1soaSArIDEpICUgd2FsbHMubGVuZ3RoXTtcblxuICAgIGNvbnN0IHdhbGxHYXBYID0gbmV4dFdhbGxFbC5vYmplY3QzRC5wb3NpdGlvbi54IC0gd2FsbEVsLm9iamVjdDNELnBvc2l0aW9uLng7XG4gICAgY29uc3Qgd2FsbEdhcFkgPSBuZXh0V2FsbEVsLm9iamVjdDNELnBvc2l0aW9uLnkgLSB3YWxsRWwub2JqZWN0M0QucG9zaXRpb24ueTtcbiAgICBjb25zdCB3YWxsR2FwWiA9IG5leHRXYWxsRWwub2JqZWN0M0QucG9zaXRpb24ueiAtIHdhbGxFbC5vYmplY3QzRC5wb3NpdGlvbi56O1xuXG4gICAgY29uc3QgaGVpZ2h0R2FwID0gbmV4dFdhbGxFbC5nZXRIZWlnaHQoKSAtIHdhbGxFbC5nZXRIZWlnaHQoKTtcbiAgICBjb25zdCB3YWxsQW5nbGUgPSBNYXRoLmF0YW4yKHdhbGxHYXBaLCB3YWxsR2FwWCk7XG4gICAgY29uc3Qgd2FsbExlbmd0aCA9IE1hdGguc3FydCh3YWxsR2FwWCAqIHdhbGxHYXBYICsgd2FsbEdhcFogKiB3YWxsR2FwWik7XG5cbiAgICB3YWxsRWwub2JqZWN0M0Qucm90YXRpb24ueSA9IFRIUkVFLk1hdGhVdGlscy5kZWdUb1JhZCgtd2FsbEFuZ2xlIC8gTWF0aC5QSSAqIDE4MCk7XG5cbiAgICBjb25zdCB3YWxsU2hhcGUgPSBuZXcgVEhSRUUuU2hhcGUoKTtcbiAgICB3YWxsU2hhcGUubW92ZVRvKDAsIHdhbGxFbC5nZXRIZWlnaHQoKSk7XG4gICAgd2FsbFNoYXBlLmxpbmVUbygwLCAwKTtcblxuICAgIC8vIGJ1aWxkIGRvb3Job2xlc1xuICAgIGZvciAoY29uc3QgZG9vcmhvbGVFbCBvZiB3YWxsRWwuZG9vcmhvbGVzKSB7XG4gICAgICBwb3NpdGlvbkRvb3Job2xlKGRvb3Job2xlRWwpO1xuXG4gICAgICBjb25zdCBkb29ybGlua0VsID0gZG9vcmhvbGVFbC5nZXREb29ybGluaygpO1xuICAgICAgaWYgKCFkb29ybGlua0VsKSB7IGNvbnRpbnVlOyB9XG5cbiAgICAgIGZvciAobGV0IGhvbGVTaWRlID0gLTE7IGhvbGVTaWRlIDw9IDE7IGhvbGVTaWRlICs9IDIpIHtcbiAgICAgICAgY29uc3QgcHRYID0gZG9vcmhvbGVFbC5vYmplY3QzRC5wb3NpdGlvbi54ICsgZG9vcmxpbmtFbC5nZXRBdHRyaWJ1dGUoJ2Rvb3JsaW5rJykud2lkdGggLyAyICogaG9sZVNpZGU7XG4gICAgICAgIGNvbnN0IGZsb29yWSA9IChwdFggLyB3YWxsTGVuZ3RoKSAqIHdhbGxHYXBZO1xuICAgICAgICBsZXQgdG9wWSA9IGZsb29yWSArIGRvb3JsaW5rRWwuZ2V0QXR0cmlidXRlKCdkb29ybGluaycpLmhlaWdodDtcblxuICAgICAgICBjb25zdCBjdXJDZWlsID0gd2FsbEVsLmdldEhlaWdodCgpICsgKHB0WCAvIHdhbGxMZW5ndGgpICogaGVpZ2h0R2FwO1xuICAgICAgICBjb25zdCBtYXhUb3BZID0gZmxvb3JZICsgY3VyQ2VpbCAtIEhBSVI7Ly8gd2lsbCBhbHdheXMgYmUgYSBzZWFtLCBidXQsIEknbSBub3QgYm90aGVyaW5nIHRvIHJld3JpdGUganVzdCBmb3IgdGhhdFxuICAgICAgICBpZiAodG9wWSA+IG1heFRvcFkpIHsgdG9wWSA9IG1heFRvcFk7IH1cblxuICAgICAgICBhZGRXb3JsZFZlcnQod2FsbEVsLCBkb29yaG9sZUVsLCBwdFgsIGZsb29yWSk7XG4gICAgICAgIGFkZFdvcmxkVmVydCh3YWxsRWwsIGRvb3Job2xlRWwsIHB0WCwgdG9wWSk7XG5cbiAgICAgICAgaWYgKGhvbGVTaWRlIDwgMCkge1xuICAgICAgICAgIHdhbGxTaGFwZS5saW5lVG8ocHRYLCBmbG9vclkpO1xuICAgICAgICAgIHdhbGxTaGFwZS5saW5lVG8ocHRYLCB0b3BZKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3YWxsU2hhcGUubGluZVRvKHB0WCwgdG9wWSk7XG4gICAgICAgICAgd2FsbFNoYXBlLmxpbmVUbyhwdFgsIGZsb29yWSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB3YWxsU2hhcGUubGluZVRvKFxuICAgICAgd2FsbExlbmd0aCxcbiAgICAgIG5leHRXYWxsRWw/Lm9iamVjdDNEPy5wb3NpdGlvbj8ueSAtIHdhbGxFbD8ub2JqZWN0M0Q/LnBvc2l0aW9uPy55XG4gICAgKTtcbiAgICB3YWxsU2hhcGUubGluZVRvKFxuICAgICAgd2FsbExlbmd0aCxcbiAgICAgIChuZXh0V2FsbEVsPy5vYmplY3QzRD8ucG9zaXRpb24/LnkgLSB3YWxsRWw/Lm9iamVjdDNEPy5wb3NpdGlvbj8ueSkgKyBuZXh0V2FsbEVsLmdldEhlaWdodCgpXG4gICAgKTtcblxuICAgIGNvbnN0IHdhbGxHZW9tID0gbmV3IFRIUkVFLlNoYXBlR2VvbWV0cnkod2FsbFNoYXBlKTtcbiAgICBtYWtlUGxhbmVVdnMod2FsbEdlb20sICd4JywgJ3knLCAxLCAxKTtcbiAgICBmaW5pc2hHZW9tZXRyeSh3YWxsR2VvbSk7XG4gICAgY29uc3QgbXlNYXQgPSB3YWxsRWw/LmNvbXBvbmVudHM/Lm1hdGVyaWFsPy5tYXRlcmlhbCB8fCB3YWxsRWw/LnBhcmVudEVsPy5jb21wb25lbnRzPy5tYXRlcmlhbD8ubWF0ZXJpYWw7XG4gICAgaWYgKHdhbGxFbC5teU1lc2gpIHtcbiAgICAgIHdhbGxFbC5teU1lc2guZ2VvbWV0cnkgPSB3YWxsR2VvbTtcbiAgICAgIHdhbGxFbC5teU1lc2gubWF0ZXJpYWwgPSBteU1hdDtcbiAgICB9IGVsc2Uge1xuICAgICAgd2FsbEVsLm15TWVzaCA9IG5ldyBUSFJFRS5NZXNoKHdhbGxHZW9tLCBteU1hdCk7XG4gICAgICB3YWxsRWwuc2V0T2JqZWN0M0QoJ3dhbGxNZXNoJywgd2FsbEVsLm15TWVzaCk7XG4gICAgfVxuICB9XG5cbiAgLy8gYnVpbGQgY2VpbGluZyBhbmQgZmxvb3JcbiAgYnVpbGRDYXAod2FsbHMsIHJvb21FbD8uZmxvb3IsIGZhbHNlLCBvdXRzaWRlKTtcbiAgYnVpbGRDYXAod2FsbHMsIHJvb21FbD8uY2VpbGluZywgdHJ1ZSwgb3V0c2lkZSk7XG59O1xuXG5jb25zdCBidWlsZERvb3JsaW5rID0gKGRvb3JsaW5rRWwpID0+IHtcbiAgY29uc3QgeyBmcm9tLCB0byB9ID0gZG9vcmxpbmtFbC5nZXRBdHRyaWJ1dGUoJ2Rvb3JsaW5rJyk7XG4gIGNvbnN0IGZyb21WZXJ0cyA9IGZyb20/LnZlcnRzO1xuICBjb25zdCB0b1ZlcnRzID0gdG8/LnZlcnRzO1xuICBpZiAoIWZyb21WZXJ0cyB8fCAhdG9WZXJ0cykgeyByZXR1cm47IH1cblxuICBmb3IgKGNvbnN0IGRvb3JMaW5rQ2hpbGQgb2YgZG9vcmxpbmtFbC5jaGlsZHJlbikge1xuICAgIGlmICghZG9vckxpbmtDaGlsZC5jb21wb25lbnRzKSB7IGNvbnRpbnVlOyB9XG5cbiAgICBjb25zdCB0eXBlcyA9IFsnc2lkZXMnLCAnZmxvb3InLCAnY2VpbGluZyddO1xuICAgIGZvciAoY29uc3QgY3VyVHlwZSBvZiB0eXBlcykge1xuICAgICAgaWYgKCFkb29yTGlua0NoaWxkLmNvbXBvbmVudHNbY3VyVHlwZV0pIHsgY29udGludWU7IH1cblxuICAgICAgY29uc3QgbXlNYXQgPSBkb29yTGlua0NoaWxkPy5jb21wb25lbnRzPy5tYXRlcmlhbD8ubWF0ZXJpYWwgfHwgZG9vckxpbmtDaGlsZD8ucGFyZW50RWw/LmNvbXBvbmVudHM/Lm1hdGVyaWFsPy5tYXRlcmlhbDtcblxuICAgICAgaWYgKCFkb29yTGlua0NoaWxkLm15R2VvbXMpIHsgZG9vckxpbmtDaGlsZC5teUdlb21zID0gW107IH1cbiAgICAgIGlmICghZG9vckxpbmtDaGlsZC5teUdlb21zW2N1clR5cGVdKSB7XG4gICAgICAgIGNvbnN0IGN1ckdlb20gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcbiAgICAgICAgZG9vckxpbmtDaGlsZC5teUdlb21zW2N1clR5cGVdID0gY3VyR2VvbTtcbiAgICAgICAgY29uc3QgbXlNZXNoID0gbmV3IFRIUkVFLk1lc2goY3VyR2VvbSwgbXlNYXQpO1xuICAgICAgICBjdXJHZW9tLm1lc2hSZWYgPSBteU1lc2g7XG4gICAgICAgIGRvb3JMaW5rQ2hpbGQuc2V0T2JqZWN0M0QoY3VyVHlwZSwgbXlNZXNoKTtcbiAgICAgICAgY29uc3QgaW5kZXhBcnJheSA9IFtdO1xuICAgICAgICBpbmRleEFycmF5LnB1c2goMCwgMSwgMiwgMSwgMywgMik7XG4gICAgICAgIGlmIChjdXJUeXBlID09PSAnc2lkZXMnKSB7IGluZGV4QXJyYXkucHVzaCg0LCA1LCA2LCA1LCA3LCA2KTsgfVxuICAgICAgICBjdXJHZW9tLnNldEluZGV4KGluZGV4QXJyYXkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXJHZW9tID0gZG9vckxpbmtDaGlsZC5teUdlb21zW2N1clR5cGVdO1xuICAgICAgY3VyR2VvbS5tZXNoUmVmLm1hdGVyaWFsID0gbXlNYXQ7XG4gICAgICBjb25zdCBwb3NpdGlvbkFycmF5ID0gW107XG5cbiAgICAgIGNvbnN0IGFkZFdvcmxkVmVydGV4ID0gKHZlcnRleCkgPT4ge1xuICAgICAgICBjb25zdCBwb2ludCA9IHZlcnRleC5jbG9uZSgpO1xuICAgICAgICBkb29yTGlua0NoaWxkLm9iamVjdDNELndvcmxkVG9Mb2NhbChwb2ludCk7XG4gICAgICAgIHBvc2l0aW9uQXJyYXkucHVzaChwb2ludC54LCBwb2ludC55LCBwb2ludC56KTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNvbW1pdFZlcnRpY2VzID0gKCkgPT4ge1xuICAgICAgICBjdXJHZW9tLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkocG9zaXRpb25BcnJheSksIDMpKTtcbiAgICAgIH07XG5cbiAgICAgIHN3aXRjaCAoY3VyVHlwZSkge1xuICAgICAgICBjYXNlICdmbG9vcic6XG5cbiAgICAgICAgICBhZGRXb3JsZFZlcnRleCh0b1ZlcnRzWzBdKTtcbiAgICAgICAgICBhZGRXb3JsZFZlcnRleCh0b1ZlcnRzWzJdKTtcbiAgICAgICAgICBhZGRXb3JsZFZlcnRleChmcm9tVmVydHNbMl0pO1xuICAgICAgICAgIGFkZFdvcmxkVmVydGV4KGZyb21WZXJ0c1swXSk7XG5cbiAgICAgICAgICBjb21taXRWZXJ0aWNlcygpO1xuXG4gICAgICAgICAgbWFrZUdlb21ldHJ5VXZzKGN1ckdlb20sIChwb2ludCwgdmVydEluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAxIC0gKHZlcnRJbmRleCAlIDIpLFxuICAgICAgICAgICAgICAxIC0gTWF0aC5mbG9vcih2ZXJ0SW5kZXggLyAyKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjZWlsaW5nJzpcblxuICAgICAgICAgIGFkZFdvcmxkVmVydGV4KHRvVmVydHNbM10pO1xuICAgICAgICAgIGFkZFdvcmxkVmVydGV4KHRvVmVydHNbMV0pO1xuICAgICAgICAgIGFkZFdvcmxkVmVydGV4KGZyb21WZXJ0c1sxXSk7XG4gICAgICAgICAgYWRkV29ybGRWZXJ0ZXgoZnJvbVZlcnRzWzNdKTtcblxuICAgICAgICAgIGNvbW1pdFZlcnRpY2VzKCk7XG5cbiAgICAgICAgICBtYWtlR2VvbWV0cnlVdnMoY3VyR2VvbSwgKHBvaW50LCB2ZXJ0SW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgIHZlcnRJbmRleCAlIDIsXG4gICAgICAgICAgICAgIDEgLSBNYXRoLmZsb29yKHZlcnRJbmRleCAvIDIpXG4gICAgICAgICAgICBdO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NpZGVzJzpcblxuICAgICAgICAgIGFkZFdvcmxkVmVydGV4KHRvVmVydHNbMl0pO1xuICAgICAgICAgIGFkZFdvcmxkVmVydGV4KHRvVmVydHNbM10pO1xuICAgICAgICAgIGFkZFdvcmxkVmVydGV4KGZyb21WZXJ0c1swXSk7XG4gICAgICAgICAgYWRkV29ybGRWZXJ0ZXgoZnJvbVZlcnRzWzFdKTtcblxuICAgICAgICAgIGFkZFdvcmxkVmVydGV4KGZyb21WZXJ0c1syXSk7XG4gICAgICAgICAgYWRkV29ybGRWZXJ0ZXgoZnJvbVZlcnRzWzNdKTtcbiAgICAgICAgICBhZGRXb3JsZFZlcnRleCh0b1ZlcnRzWzBdKTtcbiAgICAgICAgICBhZGRXb3JsZFZlcnRleCh0b1ZlcnRzWzFdKTtcblxuICAgICAgICAgIGNvbW1pdFZlcnRpY2VzKCk7XG5cbiAgICAgICAgICBtYWtlR2VvbWV0cnlVdnMoY3VyR2VvbSwgKHBvaW50LCB2ZXJ0SW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHV2ID0gW107XG4gICAgICAgICAgICB1dlswXSA9IE1hdGguZmxvb3IodmVydEluZGV4IC8gMik7XG4gICAgICAgICAgICB1dlsxXSA9IHZlcnRJbmRleCAlIDI7XG4gICAgICAgICAgICBpZiAodmVydEluZGV4IDwgNCkgeyB1dlswXSA9IDEgLSB1dlswXTsgfVxuICAgICAgICAgICAgcmV0dXJuIHV2O1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBmaW5pc2hHZW9tZXRyeShjdXJHZW9tKTtcbiAgICB9XG4gIH1cbn07XG5cbkFGUkFNRS5yZWdpc3RlclN5c3RlbSgnYnVpbGRpbmcnLCB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZygnaW5pdGlhbGl6aW5nIGJ1aWxkaW5nJyk7XG5cbiAgICB0aGlzLmVsLnJvb21zID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdhLXJvb20nKTtcbiAgICB0aGlzLmVsLmRvb3JsaW5rcyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnYS1kb29ybGluaycpO1xuICAgIHRoaXMuZWwudXBkYXRlUmVhZHkgPSBmYWxzZTtcblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkJywgdGhpcy5pbml0aWFsQnVpbGQpO1xuICB9LFxuICBpbml0aWFsQnVpbGQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmluZm8oJ2J1aWxkaW5nLi4uJyk7XG5cbiAgICB0aGlzLm9iamVjdDNELnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG5cbiAgICBmb3IgKGNvbnN0IHJvb21FbCBvZiB0aGlzLnJvb21zKSB7XG4gICAgICBidWlsZFJvb20ocm9vbUVsKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGRvb3JsaW5rRWwgb2YgdGhpcy5kb29ybGlua3MpIHtcbiAgICAgIGJ1aWxkRG9vcmxpbmsoZG9vcmxpbmtFbCk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVSZWFkeSA9IHRydWU7XG4gIH0sXG4gIGJ1aWxkUm9vbTogZnVuY3Rpb24gKHJvb21FbCkge1xuICAgIGlmICh0aGlzLmVsLnVwZGF0ZVJlYWR5KSBidWlsZFJvb20ocm9vbUVsKTtcbiAgfSxcbiAgYnVpbGREb29ybGluazogZnVuY3Rpb24gKGRvb3JsaW5rRWwpIHtcbiAgICBpZiAodGhpcy5lbC51cGRhdGVSZWFkeSkgYnVpbGREb29ybGluayhkb29ybGlua0VsKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/systems/building.js\n");

/***/ }),

/***/ "./src/systems/index.js":
/*!******************************!*\
  !*** ./src/systems/index.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n__webpack_require__(/*! ./building */ \"./src/systems/building.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtcy9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixtQkFBTyxDQUFDLDZDQUFZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3N5c3RlbXMvaW5kZXguanM/NzFkNSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vYnVpbGRpbmcnKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/systems/index.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});