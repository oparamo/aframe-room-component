/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/components/ceiling.js":
/*!***********************************!*\
  !*** ./src/components/ceiling.js ***!
  \***********************************/
/***/ ((module) => {

eval("\n\nconst DOORLINK = 'a-doorlink';\nconst ROOM = 'a-room';\n\nmodule.exports.Component = AFRAME.registerComponent('ceiling', {\n  init: function () {\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== DOORLINK && parentName !== ROOM) {\n      const message = `<a-ceiling> must be a child of a <${DOORLINK}> or <${ROOM}>.`;\n      throw new Error(message);\n    }\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jZWlsaW5nLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7O0FBRUEsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxTQUFTLFFBQVEsS0FBSztBQUNqRjtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL2NvbXBvbmVudHMvY2VpbGluZy5qcz9jNTU4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgRE9PUkxJTksgPSAnYS1kb29ybGluayc7XG5jb25zdCBST09NID0gJ2Etcm9vbSc7XG5cbm1vZHVsZS5leHBvcnRzLkNvbXBvbmVudCA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnY2VpbGluZycsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHBhcmVudE5hbWUgPSB0aGlzLmVsLnBhcmVudEVsPy5sb2NhbE5hbWU7XG4gICAgaWYgKHBhcmVudE5hbWUgIT09IERPT1JMSU5LICYmIHBhcmVudE5hbWUgIT09IFJPT00pIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgPGEtY2VpbGluZz4gbXVzdCBiZSBhIGNoaWxkIG9mIGEgPCR7RE9PUkxJTkt9PiBvciA8JHtST09NfT4uYDtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/ceiling.js\n");

/***/ }),

/***/ "./src/components/doorhole.js":
/*!************************************!*\
  !*** ./src/components/doorhole.js ***!
  \************************************/
/***/ ((module) => {

eval("\n\nconst WALL = 'a-wall';\n\nmodule.exports.Component = AFRAME.registerComponent('doorhole', {\n  init: function () {\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== WALL) {\n      const message = `<a-doorhole> must be a child of a <${WALL}>.`;\n      throw new Error(message);\n    }\n\n    this.el.vertices = [];\n    this.el.getDoorlink = () => this.el.sceneEl.querySelector(`a-doorlink[from=\"#${this.el.id}\"], a-doorlink[to=\"#${this.el.id}\"]`);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9kb29yaG9sZS5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjs7QUFFQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsNERBQTRELEtBQUs7QUFDakU7QUFDQTs7QUFFQTtBQUNBLG1GQUFtRixXQUFXLHNCQUFzQixXQUFXO0FBQy9IO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9jb21wb25lbnRzL2Rvb3Job2xlLmpzP2VjODIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBXQUxMID0gJ2Etd2FsbCc7XG5cbm1vZHVsZS5leHBvcnRzLkNvbXBvbmVudCA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZG9vcmhvbGUnLCB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBwYXJlbnROYW1lID0gdGhpcy5lbC5wYXJlbnRFbD8ubG9jYWxOYW1lO1xuICAgIGlmIChwYXJlbnROYW1lICE9PSBXQUxMKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYDxhLWRvb3Job2xlPiBtdXN0IGJlIGEgY2hpbGQgb2YgYSA8JHtXQUxMfT4uYDtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsLnZlcnRpY2VzID0gW107XG4gICAgdGhpcy5lbC5nZXREb29ybGluayA9ICgpID0+IHRoaXMuZWwuc2NlbmVFbC5xdWVyeVNlbGVjdG9yKGBhLWRvb3JsaW5rW2Zyb209XCIjJHt0aGlzLmVsLmlkfVwiXSwgYS1kb29ybGlua1t0bz1cIiMke3RoaXMuZWwuaWR9XCJdYCk7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/doorhole.js\n");

/***/ }),

/***/ "./src/components/doorlink.js":
/*!************************************!*\
  !*** ./src/components/doorlink.js ***!
  \************************************/
/***/ ((module) => {

eval("\n\nconst SCENE = 'a-scene';\nconst WALL = 'a-wall';\n\nmodule.exports.Component = AFRAME.registerComponent('doorlink', {\n  schema: {\n    from: { type: 'selector' },\n    to: { type: 'selector' },\n    height: { type: 'number', default: 2.0 },\n    width: { type: 'number', default: 0.8 }\n  },\n  init: function () {\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== SCENE && parentName !== WALL) {\n      const message = `<a-doorlink> must be a child of a <${SCENE}> or <${WALL}>.`;\n      throw new Error(message);\n    }\n  },\n  update: function () {\n    this.el.sceneEl.systems?.building?.buildDoorlink(this.el);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9kb29ybGluay5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBOztBQUVBLHdCQUF3QjtBQUN4QjtBQUNBLFlBQVksa0JBQWtCO0FBQzlCLFVBQVUsa0JBQWtCO0FBQzVCLGNBQWMsOEJBQThCO0FBQzVDLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNERBQTRELE1BQU0sUUFBUSxLQUFLO0FBQy9FO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9jb21wb25lbnRzL2Rvb3JsaW5rLmpzPzRjNGYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBTQ0VORSA9ICdhLXNjZW5lJztcbmNvbnN0IFdBTEwgPSAnYS13YWxsJztcblxubW9kdWxlLmV4cG9ydHMuQ29tcG9uZW50ID0gQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdkb29ybGluaycsIHtcbiAgc2NoZW1hOiB7XG4gICAgZnJvbTogeyB0eXBlOiAnc2VsZWN0b3InIH0sXG4gICAgdG86IHsgdHlwZTogJ3NlbGVjdG9yJyB9LFxuICAgIGhlaWdodDogeyB0eXBlOiAnbnVtYmVyJywgZGVmYXVsdDogMi4wIH0sXG4gICAgd2lkdGg6IHsgdHlwZTogJ251bWJlcicsIGRlZmF1bHQ6IDAuOCB9XG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBwYXJlbnROYW1lID0gdGhpcy5lbC5wYXJlbnRFbD8ubG9jYWxOYW1lO1xuICAgIGlmIChwYXJlbnROYW1lICE9PSBTQ0VORSAmJiBwYXJlbnROYW1lICE9PSBXQUxMKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYDxhLWRvb3JsaW5rPiBtdXN0IGJlIGEgY2hpbGQgb2YgYSA8JHtTQ0VORX0+IG9yIDwke1dBTEx9Pi5gO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXM/LmJ1aWxkaW5nPy5idWlsZERvb3JsaW5rKHRoaXMuZWwpO1xuICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/doorlink.js\n");

/***/ }),

/***/ "./src/components/floor.js":
/*!*********************************!*\
  !*** ./src/components/floor.js ***!
  \*********************************/
/***/ ((module) => {

eval("\n\nconst DOORLINK = 'a-doorlink';\nconst ROOM = 'a-room';\n\nmodule.exports.Component = AFRAME.registerComponent('floor', {\n  init: function () {\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== DOORLINK && parentName !== ROOM) {\n      const message = `<a-floor> must be a child of a <${DOORLINK}> or <${ROOM}>.`;\n      throw new Error(message);\n    }\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9mbG9vci5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBOztBQUVBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsU0FBUyxRQUFRLEtBQUs7QUFDL0U7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9jb21wb25lbnRzL2Zsb29yLmpzP2RlMzQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBET09STElOSyA9ICdhLWRvb3JsaW5rJztcbmNvbnN0IFJPT00gPSAnYS1yb29tJztcblxubW9kdWxlLmV4cG9ydHMuQ29tcG9uZW50ID0gQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdmbG9vcicsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHBhcmVudE5hbWUgPSB0aGlzLmVsLnBhcmVudEVsPy5sb2NhbE5hbWU7XG4gICAgaWYgKHBhcmVudE5hbWUgIT09IERPT1JMSU5LICYmIHBhcmVudE5hbWUgIT09IFJPT00pIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgPGEtZmxvb3I+IG11c3QgYmUgYSBjaGlsZCBvZiBhIDwke0RPT1JMSU5LfT4gb3IgPCR7Uk9PTX0+LmA7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/floor.js\n");

/***/ }),

/***/ "./src/components/index.js":
/*!*********************************!*\
  !*** ./src/components/index.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n__webpack_require__(/*! ./ceiling */ \"./src/components/ceiling.js\");\n__webpack_require__(/*! ./doorhole */ \"./src/components/doorhole.js\");\n__webpack_require__(/*! ./doorlink */ \"./src/components/doorlink.js\");\n__webpack_require__(/*! ./floor */ \"./src/components/floor.js\");\n__webpack_require__(/*! ./room */ \"./src/components/room.js\");\n__webpack_require__(/*! ./sides */ \"./src/components/sides.js\");\n__webpack_require__(/*! ./wall */ \"./src/components/wall.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixtQkFBTyxDQUFDLDhDQUFXO0FBQ25CLG1CQUFPLENBQUMsZ0RBQVk7QUFDcEIsbUJBQU8sQ0FBQyxnREFBWTtBQUNwQixtQkFBTyxDQUFDLDBDQUFTO0FBQ2pCLG1CQUFPLENBQUMsd0NBQVE7QUFDaEIsbUJBQU8sQ0FBQywwQ0FBUztBQUNqQixtQkFBTyxDQUFDLHdDQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL2NvbXBvbmVudHMvaW5kZXguanM/MmFmOSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vY2VpbGluZycpO1xucmVxdWlyZSgnLi9kb29yaG9sZScpO1xucmVxdWlyZSgnLi9kb29ybGluaycpO1xucmVxdWlyZSgnLi9mbG9vcicpO1xucmVxdWlyZSgnLi9yb29tJyk7XG5yZXF1aXJlKCcuL3NpZGVzJyk7XG5yZXF1aXJlKCcuL3dhbGwnKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/index.js\n");

/***/ }),

/***/ "./src/components/room.js":
/*!********************************!*\
  !*** ./src/components/room.js ***!
  \********************************/
/***/ ((module) => {

eval("\n\nmodule.exports.Component = AFRAME.registerComponent('room', {\n  schema: {\n    outside: { type: 'boolean' },\n    height: { type: 'number', default: 2.4 },\n    width: { type: 'number' },\n    length: { type: 'number' }\n  },\n  init: function () {\n    const roomEl = this.el;\n    const { length, width } = roomEl?.getAttribute('room');\n    const walls = Array.from(roomEl.querySelectorAll('a-wall'));\n\n    if ((width || length) && !(width && length)) {\n      const message = '<a-room> with WIDTH must also have LENGTH (and vice versa).';\n      console.error(message);\n      throw new Error(message);\n    }\n\n    if (width && length && walls.length !== 4) {\n      const message = '<a-room> with WIDTH and LENGTH must have four walls.';\n      console.error(message);\n      throw new Error(message);\n    }\n\n    roomEl.ceiling = roomEl.querySelector('a-ceiling');\n    roomEl.floor = roomEl.querySelector('a-floor');\n    roomEl.walls = walls;\n  },\n  update: function () {\n    this.el.sceneEl.systems?.building?.buildRoom(this.el);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9yb29tLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLHdCQUF3QjtBQUN4QjtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDLGNBQWMsOEJBQThCO0FBQzVDLGFBQWEsZ0JBQWdCO0FBQzdCLGNBQWM7QUFDZCxHQUFHO0FBQ0g7QUFDQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9jb21wb25lbnRzL3Jvb20uanM/YzNhYSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzLkNvbXBvbmVudCA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgncm9vbScsIHtcbiAgc2NoZW1hOiB7XG4gICAgb3V0c2lkZTogeyB0eXBlOiAnYm9vbGVhbicgfSxcbiAgICBoZWlnaHQ6IHsgdHlwZTogJ251bWJlcicsIGRlZmF1bHQ6IDIuNCB9LFxuICAgIHdpZHRoOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgbGVuZ3RoOiB7IHR5cGU6ICdudW1iZXInIH1cbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHJvb21FbCA9IHRoaXMuZWw7XG4gICAgY29uc3QgeyBsZW5ndGgsIHdpZHRoIH0gPSByb29tRWw/LmdldEF0dHJpYnV0ZSgncm9vbScpO1xuICAgIGNvbnN0IHdhbGxzID0gQXJyYXkuZnJvbShyb29tRWwucXVlcnlTZWxlY3RvckFsbCgnYS13YWxsJykpO1xuXG4gICAgaWYgKCh3aWR0aCB8fCBsZW5ndGgpICYmICEod2lkdGggJiYgbGVuZ3RoKSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICc8YS1yb29tPiB3aXRoIFdJRFRIIG11c3QgYWxzbyBoYXZlIExFTkdUSCAoYW5kIHZpY2UgdmVyc2EpLic7XG4gICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGlmICh3aWR0aCAmJiBsZW5ndGggJiYgd2FsbHMubGVuZ3RoICE9PSA0KSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gJzxhLXJvb20+IHdpdGggV0lEVEggYW5kIExFTkdUSCBtdXN0IGhhdmUgZm91ciB3YWxscy4nO1xuICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG5cbiAgICByb29tRWwuY2VpbGluZyA9IHJvb21FbC5xdWVyeVNlbGVjdG9yKCdhLWNlaWxpbmcnKTtcbiAgICByb29tRWwuZmxvb3IgPSByb29tRWwucXVlcnlTZWxlY3RvcignYS1mbG9vcicpO1xuICAgIHJvb21FbC53YWxscyA9IHdhbGxzO1xuICB9LFxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVsLnNjZW5lRWwuc3lzdGVtcz8uYnVpbGRpbmc/LmJ1aWxkUm9vbSh0aGlzLmVsKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/room.js\n");

/***/ }),

/***/ "./src/components/sides.js":
/*!*********************************!*\
  !*** ./src/components/sides.js ***!
  \*********************************/
/***/ ((module) => {

eval("\n\nconst DOORLINK = 'a-doorlink';\n\nmodule.exports.Component = AFRAME.registerComponent('sides', {\n  init: function () {\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== DOORLINK) {\n      const message = `<a-sides> must be a child of a <${DOORLINK}>.`;\n      throw new Error(message);\n    }\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9zaWRlcy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjs7QUFFQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EseURBQXlELFNBQVM7QUFDbEU7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9jb21wb25lbnRzL3NpZGVzLmpzPzg5ZmIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBET09STElOSyA9ICdhLWRvb3JsaW5rJztcblxubW9kdWxlLmV4cG9ydHMuQ29tcG9uZW50ID0gQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdzaWRlcycsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHBhcmVudE5hbWUgPSB0aGlzLmVsLnBhcmVudEVsPy5sb2NhbE5hbWU7XG4gICAgaWYgKHBhcmVudE5hbWUgIT09IERPT1JMSU5LKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYDxhLXNpZGVzPiBtdXN0IGJlIGEgY2hpbGQgb2YgYSA8JHtET09STElOS30+LmA7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/sides.js\n");

/***/ }),

/***/ "./src/components/wall.js":
/*!********************************!*\
  !*** ./src/components/wall.js ***!
  \********************************/
/***/ ((module) => {

eval("\n\nconst ROOM = 'a-room';\n\nmodule.exports.Component = AFRAME.registerComponent('wall', {\n  schema: {\n    height: { type: 'number' }\n  },\n  init: function () {\n    const parentName = this.el.parentEl?.localName;\n    if (parentName !== ROOM) {\n      const message = `<a-wall> must be a child of a <${ROOM}>`;\n      throw new Error(message);\n    }\n\n    const doorholes = Array.from(this.el.querySelectorAll('a-doorhole'));\n    this.el.doorholes = doorholes.sort((a, b) => a?.object3D?.position?.x - b?.object3D?.position?.x);\n\n    this.el.getHeight = () => this.el.getAttribute('wall')?.height || this.el.parentEl?.getAttribute('room')?.height;\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy93YWxsLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBLHdCQUF3QjtBQUN4QjtBQUNBLGNBQWM7QUFDZCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELEtBQUs7QUFDN0Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL2NvbXBvbmVudHMvd2FsbC5qcz8yYWI3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgUk9PTSA9ICdhLXJvb20nO1xuXG5tb2R1bGUuZXhwb3J0cy5Db21wb25lbnQgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3dhbGwnLCB7XG4gIHNjaGVtYToge1xuICAgIGhlaWdodDogeyB0eXBlOiAnbnVtYmVyJyB9XG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBwYXJlbnROYW1lID0gdGhpcy5lbC5wYXJlbnRFbD8ubG9jYWxOYW1lO1xuICAgIGlmIChwYXJlbnROYW1lICE9PSBST09NKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYDxhLXdhbGw+IG11c3QgYmUgYSBjaGlsZCBvZiBhIDwke1JPT019PmA7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZG9vcmhvbGVzID0gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EtZG9vcmhvbGUnKSk7XG4gICAgdGhpcy5lbC5kb29yaG9sZXMgPSBkb29yaG9sZXMuc29ydCgoYSwgYikgPT4gYT8ub2JqZWN0M0Q/LnBvc2l0aW9uPy54IC0gYj8ub2JqZWN0M0Q/LnBvc2l0aW9uPy54KTtcblxuICAgIHRoaXMuZWwuZ2V0SGVpZ2h0ID0gKCkgPT4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ3dhbGwnKT8uaGVpZ2h0IHx8IHRoaXMuZWwucGFyZW50RWw/LmdldEF0dHJpYnV0ZSgncm9vbScpPy5oZWlnaHQ7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/wall.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n__webpack_require__(/*! ./components */ \"./src/components/index.js\");\n__webpack_require__(/*! ./primitives */ \"./src/primitives/index.js\");\n__webpack_require__(/*! ./systems */ \"./src/systems/index.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsbUJBQU8sQ0FBQywrQ0FBYztBQUN0QixtQkFBTyxDQUFDLCtDQUFjO0FBQ3RCLG1CQUFPLENBQUMseUNBQVciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZnJhbWUtcm9vbS1jb21wb25lbnQvLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vY29tcG9uZW50cycpO1xucmVxdWlyZSgnLi9wcmltaXRpdmVzJyk7XG5yZXF1aXJlKCcuL3N5c3RlbXMnKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/primitives/a-ceiling.js":
/*!*************************************!*\
  !*** ./src/primitives/a-ceiling.js ***!
  \*************************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-ceiling', {\n  defaultComponents: { ceiling: {} },\n  mappings: {}\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLWNlaWxpbmcuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQSx1QkFBdUIsYUFBYTtBQUNwQztBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZnJhbWUtcm9vbS1jb21wb25lbnQvLi9zcmMvcHJpbWl0aXZlcy9hLWNlaWxpbmcuanM/NDA3YyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbkFGUkFNRS5yZWdpc3RlclByaW1pdGl2ZSgnYS1jZWlsaW5nJywge1xuICBkZWZhdWx0Q29tcG9uZW50czogeyBjZWlsaW5nOiB7fSB9LFxuICBtYXBwaW5nczoge31cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/primitives/a-ceiling.js\n");

/***/ }),

/***/ "./src/primitives/a-doorhole.js":
/*!**************************************!*\
  !*** ./src/primitives/a-doorhole.js ***!
  \**************************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-doorhole', {\n  defaultComponents: { doorhole: {} },\n  mappings: {}\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLWRvb3Job2xlLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsdUJBQXVCLGNBQWM7QUFDckM7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS1kb29yaG9sZS5qcz9hYzU0Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuQUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLWRvb3Job2xlJywge1xuICBkZWZhdWx0Q29tcG9uZW50czogeyBkb29yaG9sZToge30gfSxcbiAgbWFwcGluZ3M6IHt9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/primitives/a-doorhole.js\n");

/***/ }),

/***/ "./src/primitives/a-doorlink.js":
/*!**************************************!*\
  !*** ./src/primitives/a-doorlink.js ***!
  \**************************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-doorlink', {\n  defaultComponents: { doorlink: {} },\n  mappings: {\n    from: 'doorlink.from',\n    to: 'doorlink.to',\n    height: 'doorlink.height',\n    width: 'doorlink.width'\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLWRvb3JsaW5rLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsdUJBQXVCLGNBQWM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FmcmFtZS1yb29tLWNvbXBvbmVudC8uL3NyYy9wcmltaXRpdmVzL2EtZG9vcmxpbmsuanM/ZDhiOSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbkFGUkFNRS5yZWdpc3RlclByaW1pdGl2ZSgnYS1kb29ybGluaycsIHtcbiAgZGVmYXVsdENvbXBvbmVudHM6IHsgZG9vcmxpbms6IHt9IH0sXG4gIG1hcHBpbmdzOiB7XG4gICAgZnJvbTogJ2Rvb3JsaW5rLmZyb20nLFxuICAgIHRvOiAnZG9vcmxpbmsudG8nLFxuICAgIGhlaWdodDogJ2Rvb3JsaW5rLmhlaWdodCcsXG4gICAgd2lkdGg6ICdkb29ybGluay53aWR0aCdcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/primitives/a-doorlink.js\n");

/***/ }),

/***/ "./src/primitives/a-floor.js":
/*!***********************************!*\
  !*** ./src/primitives/a-floor.js ***!
  \***********************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-floor', {\n  defaultComponents: { floor: {} },\n  mappings: {}\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLWZsb29yLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsdUJBQXVCLFdBQVc7QUFDbEM7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS1mbG9vci5qcz9lM2U0Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuQUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLWZsb29yJywge1xuICBkZWZhdWx0Q29tcG9uZW50czogeyBmbG9vcjoge30gfSxcbiAgbWFwcGluZ3M6IHt9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/primitives/a-floor.js\n");

/***/ }),

/***/ "./src/primitives/a-room.js":
/*!**********************************!*\
  !*** ./src/primitives/a-room.js ***!
  \**********************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-room', {\n  defaultComponents: { room: {} },\n  mappings: {\n    outside: 'room.outside',\n    height: 'room.height',\n    width: 'room.width',\n    length: 'room.length'\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLXJvb20uanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQSx1QkFBdUIsVUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS1yb29tLmpzP2M3ZjEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5BRlJBTUUucmVnaXN0ZXJQcmltaXRpdmUoJ2Etcm9vbScsIHtcbiAgZGVmYXVsdENvbXBvbmVudHM6IHsgcm9vbToge30gfSxcbiAgbWFwcGluZ3M6IHtcbiAgICBvdXRzaWRlOiAncm9vbS5vdXRzaWRlJyxcbiAgICBoZWlnaHQ6ICdyb29tLmhlaWdodCcsXG4gICAgd2lkdGg6ICdyb29tLndpZHRoJyxcbiAgICBsZW5ndGg6ICdyb29tLmxlbmd0aCdcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/primitives/a-room.js\n");

/***/ }),

/***/ "./src/primitives/a-sides.js":
/*!***********************************!*\
  !*** ./src/primitives/a-sides.js ***!
  \***********************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-sides', {\n  defaultComponents: { sides: {} },\n  mappings: {}\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLXNpZGVzLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsdUJBQXVCLFdBQVc7QUFDbEM7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS1zaWRlcy5qcz9kNjAyIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuQUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLXNpZGVzJywge1xuICBkZWZhdWx0Q29tcG9uZW50czogeyBzaWRlczoge30gfSxcbiAgbWFwcGluZ3M6IHt9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/primitives/a-sides.js\n");

/***/ }),

/***/ "./src/primitives/a-wall.js":
/*!**********************************!*\
  !*** ./src/primitives/a-wall.js ***!
  \**********************************/
/***/ (() => {

eval("\n\nAFRAME.registerPrimitive('a-wall', {\n  defaultComponents: { wall: {} },\n  mappings: {\n    height: 'wall.height'\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9hLXdhbGwuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQSx1QkFBdUIsVUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvYS13YWxsLmpzPzY2NmEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5BRlJBTUUucmVnaXN0ZXJQcmltaXRpdmUoJ2Etd2FsbCcsIHtcbiAgZGVmYXVsdENvbXBvbmVudHM6IHsgd2FsbDoge30gfSxcbiAgbWFwcGluZ3M6IHtcbiAgICBoZWlnaHQ6ICd3YWxsLmhlaWdodCdcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/primitives/a-wall.js\n");

/***/ }),

/***/ "./src/primitives/index.js":
/*!*********************************!*\
  !*** ./src/primitives/index.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n__webpack_require__(/*! ./a-ceiling */ \"./src/primitives/a-ceiling.js\");\n__webpack_require__(/*! ./a-doorhole */ \"./src/primitives/a-doorhole.js\");\n__webpack_require__(/*! ./a-doorlink */ \"./src/primitives/a-doorlink.js\");\n__webpack_require__(/*! ./a-floor */ \"./src/primitives/a-floor.js\");\n__webpack_require__(/*! ./a-room */ \"./src/primitives/a-room.js\");\n__webpack_require__(/*! ./a-sides */ \"./src/primitives/a-sides.js\");\n__webpack_require__(/*! ./a-wall */ \"./src/primitives/a-wall.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcHJpbWl0aXZlcy9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixtQkFBTyxDQUFDLGtEQUFhO0FBQ3JCLG1CQUFPLENBQUMsb0RBQWM7QUFDdEIsbUJBQU8sQ0FBQyxvREFBYztBQUN0QixtQkFBTyxDQUFDLDhDQUFXO0FBQ25CLG1CQUFPLENBQUMsNENBQVU7QUFDbEIsbUJBQU8sQ0FBQyw4Q0FBVztBQUNuQixtQkFBTyxDQUFDLDRDQUFVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3ByaW1pdGl2ZXMvaW5kZXguanM/ZjJhYiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vYS1jZWlsaW5nJyk7XG5yZXF1aXJlKCcuL2EtZG9vcmhvbGUnKTtcbnJlcXVpcmUoJy4vYS1kb29ybGluaycpO1xucmVxdWlyZSgnLi9hLWZsb29yJyk7XG5yZXF1aXJlKCcuL2Etcm9vbScpO1xucmVxdWlyZSgnLi9hLXNpZGVzJyk7XG5yZXF1aXJlKCcuL2Etd2FsbCcpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/primitives/index.js\n");

/***/ }),

/***/ "./src/systems/building.js":
/*!*********************************!*\
  !*** ./src/systems/building.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst { buildDoorlink, buildRoom } = __webpack_require__(/*! ./buildingService */ \"./src/systems/buildingService.js\");\n\nAFRAME.registerSystem('building', {\n  init: function () {\n    this.el.addEventListener('loaded', this.initialBuild);\n    this.el.updateReady = false;\n  },\n  initialBuild: function () {\n    const doorlinks = this.querySelectorAll('a-doorlink');\n    const rooms = this.querySelectorAll('a-room');\n\n    this.object3D.updateMatrixWorld();\n\n    for (const roomEl of rooms) {\n      buildRoom(roomEl);\n    }\n\n    for (const doorlinkEl of doorlinks) {\n      buildDoorlink(doorlinkEl);\n    }\n\n    this.updateReady = true;\n  },\n  buildRoom: function (roomEl) {\n    if (this.el.updateReady) buildRoom(roomEl);\n  },\n  buildDoorlink: function (doorlinkEl) {\n    if (this.el.updateReady) buildDoorlink(doorlinkEl);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtcy9idWlsZGluZy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixRQUFRLDJCQUEyQixFQUFFLG1CQUFPLENBQUMsMkRBQW1COztBQUVoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZnJhbWUtcm9vbS1jb21wb25lbnQvLi9zcmMvc3lzdGVtcy9idWlsZGluZy5qcz8xNzRkIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgeyBidWlsZERvb3JsaW5rLCBidWlsZFJvb20gfSA9IHJlcXVpcmUoJy4vYnVpbGRpbmdTZXJ2aWNlJyk7XG5cbkFGUkFNRS5yZWdpc3RlclN5c3RlbSgnYnVpbGRpbmcnLCB7XG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZCcsIHRoaXMuaW5pdGlhbEJ1aWxkKTtcbiAgICB0aGlzLmVsLnVwZGF0ZVJlYWR5ID0gZmFsc2U7XG4gIH0sXG4gIGluaXRpYWxCdWlsZDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGRvb3JsaW5rcyA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnYS1kb29ybGluaycpO1xuICAgIGNvbnN0IHJvb21zID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdhLXJvb20nKTtcblxuICAgIHRoaXMub2JqZWN0M0QudXBkYXRlTWF0cml4V29ybGQoKTtcblxuICAgIGZvciAoY29uc3Qgcm9vbUVsIG9mIHJvb21zKSB7XG4gICAgICBidWlsZFJvb20ocm9vbUVsKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGRvb3JsaW5rRWwgb2YgZG9vcmxpbmtzKSB7XG4gICAgICBidWlsZERvb3JsaW5rKGRvb3JsaW5rRWwpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlUmVhZHkgPSB0cnVlO1xuICB9LFxuICBidWlsZFJvb206IGZ1bmN0aW9uIChyb29tRWwpIHtcbiAgICBpZiAodGhpcy5lbC51cGRhdGVSZWFkeSkgYnVpbGRSb29tKHJvb21FbCk7XG4gIH0sXG4gIGJ1aWxkRG9vcmxpbms6IGZ1bmN0aW9uIChkb29ybGlua0VsKSB7XG4gICAgaWYgKHRoaXMuZWwudXBkYXRlUmVhZHkpIGJ1aWxkRG9vcmxpbmsoZG9vcmxpbmtFbCk7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/systems/building.js\n");

/***/ }),

/***/ "./src/systems/buildingService.js":
/*!****************************************!*\
  !*** ./src/systems/buildingService.js ***!
  \****************************************/
/***/ ((module) => {

eval("\n\nconst HAIR = 0.0001;\n\nconst flipGeometry = (geom) => {\n  const indices = geom.getIndex().array;\n  for (let i = 0; i < indices.length; i += 3) {\n    const tempIndex = indices[i + 2];\n    indices[i + 2] = indices[i + 1];\n    indices[i + 1] = tempIndex;\n  }\n\n  geom.getIndex().needsUpdate = true;\n};\n\nconst makeGeometryUvs = (geom, callback) => {\n  const indices = geom.getIndex().array;\n  const uvs = [];\n  for (const vertexIndex of indices) {\n    const vertex = new THREE.Vector3(\n      geom.attributes.position.getX(vertexIndex),\n      geom.attributes.position.getY(vertexIndex),\n      geom.attributes.position.getZ(vertexIndex)\n    );\n\n    const [u, v] = callback(vertex, vertexIndex % 3);\n    uvs[vertexIndex * 2 + 0] = u;\n    uvs[vertexIndex * 2 + 1] = v;\n  }\n\n  geom.setAttribute('uv', new THREE.BufferAttribute(new Float32Array(uvs), 2));\n};\n\nconst makePlaneUvs = (geom, uKey, vKey, uMult, vMult) => {\n  const callback = (point) => ([point[uKey] * uMult, point[vKey] * vMult]);\n  makeGeometryUvs(geom, callback);\n};\n\nconst finishGeometry = (geom) => {\n  geom.computeVertexNormals();\n  // geom.computeBoundingBox();\n  // geom.computeBoundingSphere();\n};\n\nconst addDoorlinkWorldVertex = (vertex, doorlinkChildEl, positions) => {\n  const point = vertex.clone();\n  doorlinkChildEl.object3D.worldToLocal(point);\n  positions.push(point.x, point.y, point.z);\n};\n\nconst addDoorholeWorldVertex = (wall, doorhole, ptX, ptY) => {\n  const vertex = new THREE.Vector3(ptX, ptY, 0);\n  wall.object3D.localToWorld(vertex);\n  doorhole.vertices.push(vertex);\n};\n\nconst positionDoorhole = (doorholeEl) => {\n  const doorlinkEl = doorholeEl.getDoorlink();\n  const wallEl = doorholeEl.parentEl;\n  const nextWallEl = wallEl?.nextWallEl;\n  if (!doorlinkEl || !nextWallEl) { return; }\n\n  const wallWorldPosition = new THREE.Vector3();\n  wallEl.object3D.getWorldPosition(wallWorldPosition);\n\n  const nextWallWorldPosition = new THREE.Vector3();\n  nextWallEl.object3D.getWorldPosition(nextWallWorldPosition);\n\n  const doorlinkWorldPosition = new THREE.Vector3();\n  doorlinkEl.object3D.getWorldPosition(doorlinkWorldPosition);\n\n  const doorlinkGapX = doorlinkWorldPosition.x - wallWorldPosition.x;\n  const doorlinkGapZ = doorlinkWorldPosition.z - wallWorldPosition.z;\n\n  const wallGapX = nextWallWorldPosition.x - wallWorldPosition.x;\n  const wallGapZ = nextWallWorldPosition.z - wallWorldPosition.z;\n\n  const wallAngle = Math.atan2(wallGapZ, wallGapX);\n  const wallLength = Math.sqrt(wallGapX * wallGapX + wallGapZ * wallGapZ);\n\n  const doorHalf = doorlinkEl.getAttribute('doorlink')?.width / 2;\n\n  let localLinkX = doorlinkGapX * Math.cos(-wallAngle) - doorlinkGapZ * Math.sin(-wallAngle);\n  localLinkX = Math.max(localLinkX, doorHalf + HAIR);\n  localLinkX = Math.min(localLinkX, wallLength - doorHalf - HAIR);\n  // const localLinkZ = doorlinkGapX*Math.sin(-wallAngle) + doorlinkGapZ*Math.cos(-wallAngle);\n\n  doorholeEl.object3D.position.set(localLinkX, 0, 0);\n};\n\nconst sortWalls = (walls, isOutside) => {\n  let cwSum = 0;\n  for (let i = 0; i < walls.length; i++) {\n    const wallEl = walls[i];\n    const nextWallEl = walls[(i + 1) % walls.length];\n\n    const { x: wallX, z: wallZ } = wallEl.object3D.position;\n    const { x: nextWallX, z: nextWallZ } = nextWallEl.object3D.position;\n\n    cwSum += (nextWallX - wallX) * (nextWallZ + wallZ);\n  }\n\n  let shouldReverse = false;\n  if (cwSum > 0) { shouldReverse = !shouldReverse; }\n  if (isOutside) { shouldReverse = !shouldReverse; }\n  if (shouldReverse) { walls.reverse(); }\n};\n\nconst buildCap = (walls, cap, isCeiling, isOutside) => {\n  const shape = new THREE.Shape();\n  for (let i = 0; i < walls.length; i++) {\n    const wallEl = walls[i];\n    const ptX = wallEl.object3D.position.x;\n    const ptZ = wallEl.object3D.position.z;\n    if (i) {\n      shape.lineTo(ptX, ptZ);\n    } else {\n      shape.moveTo(ptX, ptZ);\n    }\n  }\n\n  const geom = new THREE.ShapeGeometry(shape);\n  for (let i = 0; i < walls.length; i++) {\n    const wallEl = walls[i];\n    const vertex = new THREE.Vector3(\n      geom.attributes.position.getX(i),\n      geom.attributes.position.getY(i),\n      geom.attributes.position.getZ(i)\n    );\n    vertex.set(vertex.x, wallEl.object3D.position.y, vertex.y);\n    if (isCeiling) { vertex.y += wallEl.getHeight(); }\n    geom.attributes.position.setXYZ(i, vertex.x, vertex.y, vertex.z);\n  }\n\n  let shouldReverse = false;\n  if (!isCeiling) { shouldReverse = !shouldReverse; }\n  if (isOutside) { shouldReverse = !shouldReverse; }\n  if (shouldReverse) { flipGeometry(geom); }\n\n  makePlaneUvs(geom, 'x', 'z', isCeiling ? 1 : -1, 1);\n  finishGeometry(geom);\n\n  const material = cap?.components?.material?.material || cap?.parentEl?.components?.material?.material;\n  if (cap.mesh) {\n    cap.mesh.geometry = geom;\n    cap.mesh.material = material;\n  } else {\n    const typeLabel = isCeiling ? 'ceiling' : 'floor';\n    cap.mesh = new THREE.Mesh(geom, material);\n    cap.setObject3D(typeLabel, cap.mesh);\n  }\n};\n\nconst buildRoom = (roomEl) => {\n  const { outside, length, width } = roomEl?.getAttribute('room');\n  const walls = roomEl?.walls;\n\n  if (width && length) {\n    walls[0].object3D.position.set(0, 0, 0);\n    walls[1].object3D.position.set(width, 0, 0);\n    walls[2].object3D.position.set(width, 0, length);\n    walls[3].object3D.position.set(0, 0, length);\n  }\n\n  sortWalls(walls, outside);\n\n  // build walls\n  for (let i = 0; i < walls.length; i++) {\n    const wallEl = walls[i];\n    const nextWallEl = wallEl.nextWallEl = walls[(i + 1) % walls.length];\n\n    const wallGapX = nextWallEl.object3D.position.x - wallEl.object3D.position.x;\n    const wallGapY = nextWallEl.object3D.position.y - wallEl.object3D.position.y;\n    const wallGapZ = nextWallEl.object3D.position.z - wallEl.object3D.position.z;\n\n    const heightGap = nextWallEl.getHeight() - wallEl.getHeight();\n    const wallAngle = Math.atan2(wallGapZ, wallGapX);\n    const wallLength = Math.sqrt(wallGapX * wallGapX + wallGapZ * wallGapZ);\n\n    wallEl.object3D.rotation.y = THREE.MathUtils.degToRad(-wallAngle / Math.PI * 180);\n\n    const wallShape = new THREE.Shape();\n    wallShape.moveTo(0, wallEl.getHeight());\n    wallShape.lineTo(0, 0);\n\n    // build doorholes\n    for (const doorholeEl of wallEl.doorholes) {\n      positionDoorhole(doorholeEl);\n\n      const doorlinkEl = doorholeEl.getDoorlink();\n      if (!doorlinkEl) { continue; }\n\n      for (let holeSide = -1; holeSide <= 1; holeSide += 2) {\n        const ptX = doorholeEl.object3D.position.x + doorlinkEl.getAttribute('doorlink').width / 2 * holeSide;\n        const floorY = (ptX / wallLength) * wallGapY;\n        let topY = floorY + doorlinkEl.getAttribute('doorlink').height;\n\n        const ceiling = wallEl.getHeight() + (ptX / wallLength) * heightGap;\n        const maxTopY = floorY + ceiling - HAIR; // will always be a seam\n        if (topY > maxTopY) { topY = maxTopY; }\n\n        addDoorholeWorldVertex(wallEl, doorholeEl, ptX, floorY);\n        addDoorholeWorldVertex(wallEl, doorholeEl, ptX, topY);\n\n        if (holeSide < 0) {\n          wallShape.lineTo(ptX, floorY);\n          wallShape.lineTo(ptX, topY);\n        } else {\n          wallShape.lineTo(ptX, topY);\n          wallShape.lineTo(ptX, floorY);\n        }\n      }\n    }\n\n    wallShape.lineTo(\n      wallLength,\n      nextWallEl?.object3D?.position?.y - wallEl?.object3D?.position?.y\n    );\n    wallShape.lineTo(\n      wallLength,\n      (nextWallEl?.object3D?.position?.y - wallEl?.object3D?.position?.y) + nextWallEl.getHeight()\n    );\n\n    const wallGeom = new THREE.ShapeGeometry(wallShape);\n    makePlaneUvs(wallGeom, 'x', 'y', 1, 1);\n    finishGeometry(wallGeom);\n    const material = wallEl?.components?.material?.material || wallEl?.parentEl?.components?.material?.material;\n    if (wallEl.mesh) {\n      wallEl.mesh.geometry = wallGeom;\n      wallEl.mesh.material = material;\n    } else {\n      wallEl.mesh = new THREE.Mesh(wallGeom, material);\n      wallEl.setObject3D('wallMesh', wallEl.mesh);\n    }\n  }\n\n  // build ceiling and floor\n  buildCap(walls, roomEl?.floor, false, outside);\n  buildCap(walls, roomEl?.ceiling, true, outside);\n};\n\nconst buildDoorlink = (doorlinkEl) => {\n  const { from, to } = doorlinkEl.getAttribute('doorlink');\n  const fromVerts = from?.vertices;\n  const toVerts = to?.vertices;\n  if (!fromVerts || !toVerts) { return; }\n\n  for (const doorlinkChildEl of doorlinkEl.children) {\n    const types = ['sides', 'floor', 'ceiling'];\n    for (const type of types) {\n      if (!doorlinkChildEl.components[type]) { continue; }\n\n      const material = doorlinkChildEl?.components?.material?.material || doorlinkChildEl?.parentEl?.components?.material?.material;\n\n      const indices = (type === 'sides') ? [0, 1, 2, 1, 3, 2, 4, 5, 6, 5, 7, 6] : [0, 1, 2, 1, 3, 2];\n      const geom = new THREE.BufferGeometry();\n      geom.setIndex(indices);\n\n      doorlinkChildEl.mesh = new THREE.Mesh(geom, material);\n      doorlinkChildEl.setObject3D(type, doorlinkChildEl.mesh);\n\n      const positions = [];\n\n      switch (type) {\n        case 'floor':\n          addDoorlinkWorldVertex(toVerts[0], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(toVerts[2], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(fromVerts[2], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(fromVerts[0], doorlinkChildEl, positions);\n\n          geom.setAttribute('position', new THREE.BufferAttribute(new Float32Array(positions), 3));\n\n          makeGeometryUvs(geom, (point, vertIndex) => ([1 - (vertIndex % 2), 1 - Math.floor(vertIndex / 2)]));\n\n          break;\n        case 'ceiling':\n          addDoorlinkWorldVertex(toVerts[3], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(toVerts[1], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(fromVerts[1], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(fromVerts[3], doorlinkChildEl, positions);\n\n          geom.setAttribute('position', new THREE.BufferAttribute(new Float32Array(positions), 3));\n\n          makeGeometryUvs(geom, (point, vertIndex) => ([vertIndex % 2, 1 - Math.floor(vertIndex / 2)]));\n\n          break;\n        case 'sides':\n          addDoorlinkWorldVertex(toVerts[2], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(toVerts[3], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(fromVerts[0], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(fromVerts[1], doorlinkChildEl, positions);\n\n          addDoorlinkWorldVertex(fromVerts[2], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(fromVerts[3], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(toVerts[0], doorlinkChildEl, positions);\n          addDoorlinkWorldVertex(toVerts[1], doorlinkChildEl, positions);\n\n          geom.setAttribute('position', new THREE.BufferAttribute(new Float32Array(positions), 3));\n\n          makeGeometryUvs(geom, (point, vertIndex) => {\n            const uv = [];\n            uv[0] = Math.floor(vertIndex / 2);\n            uv[1] = vertIndex % 2;\n            if (vertIndex < 4) { uv[0] = 1 - uv[0]; }\n            return uv;\n          });\n\n          break;\n      }\n\n      finishGeometry(geom);\n    }\n  }\n};\n\nmodule.exports = { buildDoorlink, buildRoom };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtcy9idWlsZGluZ1NlcnZpY2UuanMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQzs7QUFFcEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBOztBQUVBLFlBQVkscUJBQXFCO0FBQ2pDLFlBQVksNkJBQTZCOztBQUV6QztBQUNBOztBQUVBO0FBQ0EsbUJBQW1CO0FBQ25CLG1CQUFtQjtBQUNuQix1QkFBdUI7QUFDdkI7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0I7QUFDcEIsbUJBQW1CO0FBQ25CLHVCQUF1Qjs7QUFFdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVSx5QkFBeUI7QUFDbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5Qjs7QUFFekIsOEJBQThCLGVBQWU7QUFDN0M7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaURBQWlEO0FBQ2pELDhCQUE4Qjs7QUFFOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVSxXQUFXO0FBQ3JCO0FBQ0E7QUFDQSxnQ0FBZ0M7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBLCtDQUErQzs7QUFFL0M7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3N5c3RlbXMvYnVpbGRpbmdTZXJ2aWNlLmpzP2FjY2YiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBIQUlSID0gMC4wMDAxO1xuXG5jb25zdCBmbGlwR2VvbWV0cnkgPSAoZ2VvbSkgPT4ge1xuICBjb25zdCBpbmRpY2VzID0gZ2VvbS5nZXRJbmRleCgpLmFycmF5O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICBjb25zdCB0ZW1wSW5kZXggPSBpbmRpY2VzW2kgKyAyXTtcbiAgICBpbmRpY2VzW2kgKyAyXSA9IGluZGljZXNbaSArIDFdO1xuICAgIGluZGljZXNbaSArIDFdID0gdGVtcEluZGV4O1xuICB9XG5cbiAgZ2VvbS5nZXRJbmRleCgpLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbn07XG5cbmNvbnN0IG1ha2VHZW9tZXRyeVV2cyA9IChnZW9tLCBjYWxsYmFjaykgPT4ge1xuICBjb25zdCBpbmRpY2VzID0gZ2VvbS5nZXRJbmRleCgpLmFycmF5O1xuICBjb25zdCB1dnMgPSBbXTtcbiAgZm9yIChjb25zdCB2ZXJ0ZXhJbmRleCBvZiBpbmRpY2VzKSB7XG4gICAgY29uc3QgdmVydGV4ID0gbmV3IFRIUkVFLlZlY3RvcjMoXG4gICAgICBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uZ2V0WCh2ZXJ0ZXhJbmRleCksXG4gICAgICBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uZ2V0WSh2ZXJ0ZXhJbmRleCksXG4gICAgICBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uZ2V0Wih2ZXJ0ZXhJbmRleClcbiAgICApO1xuXG4gICAgY29uc3QgW3UsIHZdID0gY2FsbGJhY2sodmVydGV4LCB2ZXJ0ZXhJbmRleCAlIDMpO1xuICAgIHV2c1t2ZXJ0ZXhJbmRleCAqIDIgKyAwXSA9IHU7XG4gICAgdXZzW3ZlcnRleEluZGV4ICogMiArIDFdID0gdjtcbiAgfVxuXG4gIGdlb20uc2V0QXR0cmlidXRlKCd1dicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSh1dnMpLCAyKSk7XG59O1xuXG5jb25zdCBtYWtlUGxhbmVVdnMgPSAoZ2VvbSwgdUtleSwgdktleSwgdU11bHQsIHZNdWx0KSA9PiB7XG4gIGNvbnN0IGNhbGxiYWNrID0gKHBvaW50KSA9PiAoW3BvaW50W3VLZXldICogdU11bHQsIHBvaW50W3ZLZXldICogdk11bHRdKTtcbiAgbWFrZUdlb21ldHJ5VXZzKGdlb20sIGNhbGxiYWNrKTtcbn07XG5cbmNvbnN0IGZpbmlzaEdlb21ldHJ5ID0gKGdlb20pID0+IHtcbiAgZ2VvbS5jb21wdXRlVmVydGV4Tm9ybWFscygpO1xuICAvLyBnZW9tLmNvbXB1dGVCb3VuZGluZ0JveCgpO1xuICAvLyBnZW9tLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO1xufTtcblxuY29uc3QgYWRkRG9vcmxpbmtXb3JsZFZlcnRleCA9ICh2ZXJ0ZXgsIGRvb3JsaW5rQ2hpbGRFbCwgcG9zaXRpb25zKSA9PiB7XG4gIGNvbnN0IHBvaW50ID0gdmVydGV4LmNsb25lKCk7XG4gIGRvb3JsaW5rQ2hpbGRFbC5vYmplY3QzRC53b3JsZFRvTG9jYWwocG9pbnQpO1xuICBwb3NpdGlvbnMucHVzaChwb2ludC54LCBwb2ludC55LCBwb2ludC56KTtcbn07XG5cbmNvbnN0IGFkZERvb3Job2xlV29ybGRWZXJ0ZXggPSAod2FsbCwgZG9vcmhvbGUsIHB0WCwgcHRZKSA9PiB7XG4gIGNvbnN0IHZlcnRleCA9IG5ldyBUSFJFRS5WZWN0b3IzKHB0WCwgcHRZLCAwKTtcbiAgd2FsbC5vYmplY3QzRC5sb2NhbFRvV29ybGQodmVydGV4KTtcbiAgZG9vcmhvbGUudmVydGljZXMucHVzaCh2ZXJ0ZXgpO1xufTtcblxuY29uc3QgcG9zaXRpb25Eb29yaG9sZSA9IChkb29yaG9sZUVsKSA9PiB7XG4gIGNvbnN0IGRvb3JsaW5rRWwgPSBkb29yaG9sZUVsLmdldERvb3JsaW5rKCk7XG4gIGNvbnN0IHdhbGxFbCA9IGRvb3Job2xlRWwucGFyZW50RWw7XG4gIGNvbnN0IG5leHRXYWxsRWwgPSB3YWxsRWw/Lm5leHRXYWxsRWw7XG4gIGlmICghZG9vcmxpbmtFbCB8fCAhbmV4dFdhbGxFbCkgeyByZXR1cm47IH1cblxuICBjb25zdCB3YWxsV29ybGRQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIHdhbGxFbC5vYmplY3QzRC5nZXRXb3JsZFBvc2l0aW9uKHdhbGxXb3JsZFBvc2l0aW9uKTtcblxuICBjb25zdCBuZXh0V2FsbFdvcmxkUG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICBuZXh0V2FsbEVsLm9iamVjdDNELmdldFdvcmxkUG9zaXRpb24obmV4dFdhbGxXb3JsZFBvc2l0aW9uKTtcblxuICBjb25zdCBkb29ybGlua1dvcmxkUG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICBkb29ybGlua0VsLm9iamVjdDNELmdldFdvcmxkUG9zaXRpb24oZG9vcmxpbmtXb3JsZFBvc2l0aW9uKTtcblxuICBjb25zdCBkb29ybGlua0dhcFggPSBkb29ybGlua1dvcmxkUG9zaXRpb24ueCAtIHdhbGxXb3JsZFBvc2l0aW9uLng7XG4gIGNvbnN0IGRvb3JsaW5rR2FwWiA9IGRvb3JsaW5rV29ybGRQb3NpdGlvbi56IC0gd2FsbFdvcmxkUG9zaXRpb24uejtcblxuICBjb25zdCB3YWxsR2FwWCA9IG5leHRXYWxsV29ybGRQb3NpdGlvbi54IC0gd2FsbFdvcmxkUG9zaXRpb24ueDtcbiAgY29uc3Qgd2FsbEdhcFogPSBuZXh0V2FsbFdvcmxkUG9zaXRpb24ueiAtIHdhbGxXb3JsZFBvc2l0aW9uLno7XG5cbiAgY29uc3Qgd2FsbEFuZ2xlID0gTWF0aC5hdGFuMih3YWxsR2FwWiwgd2FsbEdhcFgpO1xuICBjb25zdCB3YWxsTGVuZ3RoID0gTWF0aC5zcXJ0KHdhbGxHYXBYICogd2FsbEdhcFggKyB3YWxsR2FwWiAqIHdhbGxHYXBaKTtcblxuICBjb25zdCBkb29ySGFsZiA9IGRvb3JsaW5rRWwuZ2V0QXR0cmlidXRlKCdkb29ybGluaycpPy53aWR0aCAvIDI7XG5cbiAgbGV0IGxvY2FsTGlua1ggPSBkb29ybGlua0dhcFggKiBNYXRoLmNvcygtd2FsbEFuZ2xlKSAtIGRvb3JsaW5rR2FwWiAqIE1hdGguc2luKC13YWxsQW5nbGUpO1xuICBsb2NhbExpbmtYID0gTWF0aC5tYXgobG9jYWxMaW5rWCwgZG9vckhhbGYgKyBIQUlSKTtcbiAgbG9jYWxMaW5rWCA9IE1hdGgubWluKGxvY2FsTGlua1gsIHdhbGxMZW5ndGggLSBkb29ySGFsZiAtIEhBSVIpO1xuICAvLyBjb25zdCBsb2NhbExpbmtaID0gZG9vcmxpbmtHYXBYKk1hdGguc2luKC13YWxsQW5nbGUpICsgZG9vcmxpbmtHYXBaKk1hdGguY29zKC13YWxsQW5nbGUpO1xuXG4gIGRvb3Job2xlRWwub2JqZWN0M0QucG9zaXRpb24uc2V0KGxvY2FsTGlua1gsIDAsIDApO1xufTtcblxuY29uc3Qgc29ydFdhbGxzID0gKHdhbGxzLCBpc091dHNpZGUpID0+IHtcbiAgbGV0IGN3U3VtID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YWxscy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHdhbGxFbCA9IHdhbGxzW2ldO1xuICAgIGNvbnN0IG5leHRXYWxsRWwgPSB3YWxsc1soaSArIDEpICUgd2FsbHMubGVuZ3RoXTtcblxuICAgIGNvbnN0IHsgeDogd2FsbFgsIHo6IHdhbGxaIH0gPSB3YWxsRWwub2JqZWN0M0QucG9zaXRpb247XG4gICAgY29uc3QgeyB4OiBuZXh0V2FsbFgsIHo6IG5leHRXYWxsWiB9ID0gbmV4dFdhbGxFbC5vYmplY3QzRC5wb3NpdGlvbjtcblxuICAgIGN3U3VtICs9IChuZXh0V2FsbFggLSB3YWxsWCkgKiAobmV4dFdhbGxaICsgd2FsbFopO1xuICB9XG5cbiAgbGV0IHNob3VsZFJldmVyc2UgPSBmYWxzZTtcbiAgaWYgKGN3U3VtID4gMCkgeyBzaG91bGRSZXZlcnNlID0gIXNob3VsZFJldmVyc2U7IH1cbiAgaWYgKGlzT3V0c2lkZSkgeyBzaG91bGRSZXZlcnNlID0gIXNob3VsZFJldmVyc2U7IH1cbiAgaWYgKHNob3VsZFJldmVyc2UpIHsgd2FsbHMucmV2ZXJzZSgpOyB9XG59O1xuXG5jb25zdCBidWlsZENhcCA9ICh3YWxscywgY2FwLCBpc0NlaWxpbmcsIGlzT3V0c2lkZSkgPT4ge1xuICBjb25zdCBzaGFwZSA9IG5ldyBUSFJFRS5TaGFwZSgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHdhbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgd2FsbEVsID0gd2FsbHNbaV07XG4gICAgY29uc3QgcHRYID0gd2FsbEVsLm9iamVjdDNELnBvc2l0aW9uLng7XG4gICAgY29uc3QgcHRaID0gd2FsbEVsLm9iamVjdDNELnBvc2l0aW9uLno7XG4gICAgaWYgKGkpIHtcbiAgICAgIHNoYXBlLmxpbmVUbyhwdFgsIHB0Wik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNoYXBlLm1vdmVUbyhwdFgsIHB0Wik7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZ2VvbSA9IG5ldyBUSFJFRS5TaGFwZUdlb21ldHJ5KHNoYXBlKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YWxscy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHdhbGxFbCA9IHdhbGxzW2ldO1xuICAgIGNvbnN0IHZlcnRleCA9IG5ldyBUSFJFRS5WZWN0b3IzKFxuICAgICAgZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmdldFgoaSksXG4gICAgICBnZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uZ2V0WShpKSxcbiAgICAgIGdlb20uYXR0cmlidXRlcy5wb3NpdGlvbi5nZXRaKGkpXG4gICAgKTtcbiAgICB2ZXJ0ZXguc2V0KHZlcnRleC54LCB3YWxsRWwub2JqZWN0M0QucG9zaXRpb24ueSwgdmVydGV4LnkpO1xuICAgIGlmIChpc0NlaWxpbmcpIHsgdmVydGV4LnkgKz0gd2FsbEVsLmdldEhlaWdodCgpOyB9XG4gICAgZ2VvbS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnNldFhZWihpLCB2ZXJ0ZXgueCwgdmVydGV4LnksIHZlcnRleC56KTtcbiAgfVxuXG4gIGxldCBzaG91bGRSZXZlcnNlID0gZmFsc2U7XG4gIGlmICghaXNDZWlsaW5nKSB7IHNob3VsZFJldmVyc2UgPSAhc2hvdWxkUmV2ZXJzZTsgfVxuICBpZiAoaXNPdXRzaWRlKSB7IHNob3VsZFJldmVyc2UgPSAhc2hvdWxkUmV2ZXJzZTsgfVxuICBpZiAoc2hvdWxkUmV2ZXJzZSkgeyBmbGlwR2VvbWV0cnkoZ2VvbSk7IH1cblxuICBtYWtlUGxhbmVVdnMoZ2VvbSwgJ3gnLCAneicsIGlzQ2VpbGluZyA/IDEgOiAtMSwgMSk7XG4gIGZpbmlzaEdlb21ldHJ5KGdlb20pO1xuXG4gIGNvbnN0IG1hdGVyaWFsID0gY2FwPy5jb21wb25lbnRzPy5tYXRlcmlhbD8ubWF0ZXJpYWwgfHwgY2FwPy5wYXJlbnRFbD8uY29tcG9uZW50cz8ubWF0ZXJpYWw/Lm1hdGVyaWFsO1xuICBpZiAoY2FwLm1lc2gpIHtcbiAgICBjYXAubWVzaC5nZW9tZXRyeSA9IGdlb207XG4gICAgY2FwLm1lc2gubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0eXBlTGFiZWwgPSBpc0NlaWxpbmcgPyAnY2VpbGluZycgOiAnZmxvb3InO1xuICAgIGNhcC5tZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbSwgbWF0ZXJpYWwpO1xuICAgIGNhcC5zZXRPYmplY3QzRCh0eXBlTGFiZWwsIGNhcC5tZXNoKTtcbiAgfVxufTtcblxuY29uc3QgYnVpbGRSb29tID0gKHJvb21FbCkgPT4ge1xuICBjb25zdCB7IG91dHNpZGUsIGxlbmd0aCwgd2lkdGggfSA9IHJvb21FbD8uZ2V0QXR0cmlidXRlKCdyb29tJyk7XG4gIGNvbnN0IHdhbGxzID0gcm9vbUVsPy53YWxscztcblxuICBpZiAod2lkdGggJiYgbGVuZ3RoKSB7XG4gICAgd2FsbHNbMF0ub2JqZWN0M0QucG9zaXRpb24uc2V0KDAsIDAsIDApO1xuICAgIHdhbGxzWzFdLm9iamVjdDNELnBvc2l0aW9uLnNldCh3aWR0aCwgMCwgMCk7XG4gICAgd2FsbHNbMl0ub2JqZWN0M0QucG9zaXRpb24uc2V0KHdpZHRoLCAwLCBsZW5ndGgpO1xuICAgIHdhbGxzWzNdLm9iamVjdDNELnBvc2l0aW9uLnNldCgwLCAwLCBsZW5ndGgpO1xuICB9XG5cbiAgc29ydFdhbGxzKHdhbGxzLCBvdXRzaWRlKTtcblxuICAvLyBidWlsZCB3YWxsc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHdhbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgd2FsbEVsID0gd2FsbHNbaV07XG4gICAgY29uc3QgbmV4dFdhbGxFbCA9IHdhbGxFbC5uZXh0V2FsbEVsID0gd2FsbHNbKGkgKyAxKSAlIHdhbGxzLmxlbmd0aF07XG5cbiAgICBjb25zdCB3YWxsR2FwWCA9IG5leHRXYWxsRWwub2JqZWN0M0QucG9zaXRpb24ueCAtIHdhbGxFbC5vYmplY3QzRC5wb3NpdGlvbi54O1xuICAgIGNvbnN0IHdhbGxHYXBZID0gbmV4dFdhbGxFbC5vYmplY3QzRC5wb3NpdGlvbi55IC0gd2FsbEVsLm9iamVjdDNELnBvc2l0aW9uLnk7XG4gICAgY29uc3Qgd2FsbEdhcFogPSBuZXh0V2FsbEVsLm9iamVjdDNELnBvc2l0aW9uLnogLSB3YWxsRWwub2JqZWN0M0QucG9zaXRpb24uejtcblxuICAgIGNvbnN0IGhlaWdodEdhcCA9IG5leHRXYWxsRWwuZ2V0SGVpZ2h0KCkgLSB3YWxsRWwuZ2V0SGVpZ2h0KCk7XG4gICAgY29uc3Qgd2FsbEFuZ2xlID0gTWF0aC5hdGFuMih3YWxsR2FwWiwgd2FsbEdhcFgpO1xuICAgIGNvbnN0IHdhbGxMZW5ndGggPSBNYXRoLnNxcnQod2FsbEdhcFggKiB3YWxsR2FwWCArIHdhbGxHYXBaICogd2FsbEdhcFopO1xuXG4gICAgd2FsbEVsLm9iamVjdDNELnJvdGF0aW9uLnkgPSBUSFJFRS5NYXRoVXRpbHMuZGVnVG9SYWQoLXdhbGxBbmdsZSAvIE1hdGguUEkgKiAxODApO1xuXG4gICAgY29uc3Qgd2FsbFNoYXBlID0gbmV3IFRIUkVFLlNoYXBlKCk7XG4gICAgd2FsbFNoYXBlLm1vdmVUbygwLCB3YWxsRWwuZ2V0SGVpZ2h0KCkpO1xuICAgIHdhbGxTaGFwZS5saW5lVG8oMCwgMCk7XG5cbiAgICAvLyBidWlsZCBkb29yaG9sZXNcbiAgICBmb3IgKGNvbnN0IGRvb3Job2xlRWwgb2Ygd2FsbEVsLmRvb3Job2xlcykge1xuICAgICAgcG9zaXRpb25Eb29yaG9sZShkb29yaG9sZUVsKTtcblxuICAgICAgY29uc3QgZG9vcmxpbmtFbCA9IGRvb3Job2xlRWwuZ2V0RG9vcmxpbmsoKTtcbiAgICAgIGlmICghZG9vcmxpbmtFbCkgeyBjb250aW51ZTsgfVxuXG4gICAgICBmb3IgKGxldCBob2xlU2lkZSA9IC0xOyBob2xlU2lkZSA8PSAxOyBob2xlU2lkZSArPSAyKSB7XG4gICAgICAgIGNvbnN0IHB0WCA9IGRvb3Job2xlRWwub2JqZWN0M0QucG9zaXRpb24ueCArIGRvb3JsaW5rRWwuZ2V0QXR0cmlidXRlKCdkb29ybGluaycpLndpZHRoIC8gMiAqIGhvbGVTaWRlO1xuICAgICAgICBjb25zdCBmbG9vclkgPSAocHRYIC8gd2FsbExlbmd0aCkgKiB3YWxsR2FwWTtcbiAgICAgICAgbGV0IHRvcFkgPSBmbG9vclkgKyBkb29ybGlua0VsLmdldEF0dHJpYnV0ZSgnZG9vcmxpbmsnKS5oZWlnaHQ7XG5cbiAgICAgICAgY29uc3QgY2VpbGluZyA9IHdhbGxFbC5nZXRIZWlnaHQoKSArIChwdFggLyB3YWxsTGVuZ3RoKSAqIGhlaWdodEdhcDtcbiAgICAgICAgY29uc3QgbWF4VG9wWSA9IGZsb29yWSArIGNlaWxpbmcgLSBIQUlSOyAvLyB3aWxsIGFsd2F5cyBiZSBhIHNlYW1cbiAgICAgICAgaWYgKHRvcFkgPiBtYXhUb3BZKSB7IHRvcFkgPSBtYXhUb3BZOyB9XG5cbiAgICAgICAgYWRkRG9vcmhvbGVXb3JsZFZlcnRleCh3YWxsRWwsIGRvb3Job2xlRWwsIHB0WCwgZmxvb3JZKTtcbiAgICAgICAgYWRkRG9vcmhvbGVXb3JsZFZlcnRleCh3YWxsRWwsIGRvb3Job2xlRWwsIHB0WCwgdG9wWSk7XG5cbiAgICAgICAgaWYgKGhvbGVTaWRlIDwgMCkge1xuICAgICAgICAgIHdhbGxTaGFwZS5saW5lVG8ocHRYLCBmbG9vclkpO1xuICAgICAgICAgIHdhbGxTaGFwZS5saW5lVG8ocHRYLCB0b3BZKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3YWxsU2hhcGUubGluZVRvKHB0WCwgdG9wWSk7XG4gICAgICAgICAgd2FsbFNoYXBlLmxpbmVUbyhwdFgsIGZsb29yWSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB3YWxsU2hhcGUubGluZVRvKFxuICAgICAgd2FsbExlbmd0aCxcbiAgICAgIG5leHRXYWxsRWw/Lm9iamVjdDNEPy5wb3NpdGlvbj8ueSAtIHdhbGxFbD8ub2JqZWN0M0Q/LnBvc2l0aW9uPy55XG4gICAgKTtcbiAgICB3YWxsU2hhcGUubGluZVRvKFxuICAgICAgd2FsbExlbmd0aCxcbiAgICAgIChuZXh0V2FsbEVsPy5vYmplY3QzRD8ucG9zaXRpb24/LnkgLSB3YWxsRWw/Lm9iamVjdDNEPy5wb3NpdGlvbj8ueSkgKyBuZXh0V2FsbEVsLmdldEhlaWdodCgpXG4gICAgKTtcblxuICAgIGNvbnN0IHdhbGxHZW9tID0gbmV3IFRIUkVFLlNoYXBlR2VvbWV0cnkod2FsbFNoYXBlKTtcbiAgICBtYWtlUGxhbmVVdnMod2FsbEdlb20sICd4JywgJ3knLCAxLCAxKTtcbiAgICBmaW5pc2hHZW9tZXRyeSh3YWxsR2VvbSk7XG4gICAgY29uc3QgbWF0ZXJpYWwgPSB3YWxsRWw/LmNvbXBvbmVudHM/Lm1hdGVyaWFsPy5tYXRlcmlhbCB8fCB3YWxsRWw/LnBhcmVudEVsPy5jb21wb25lbnRzPy5tYXRlcmlhbD8ubWF0ZXJpYWw7XG4gICAgaWYgKHdhbGxFbC5tZXNoKSB7XG4gICAgICB3YWxsRWwubWVzaC5nZW9tZXRyeSA9IHdhbGxHZW9tO1xuICAgICAgd2FsbEVsLm1lc2gubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgd2FsbEVsLm1lc2ggPSBuZXcgVEhSRUUuTWVzaCh3YWxsR2VvbSwgbWF0ZXJpYWwpO1xuICAgICAgd2FsbEVsLnNldE9iamVjdDNEKCd3YWxsTWVzaCcsIHdhbGxFbC5tZXNoKTtcbiAgICB9XG4gIH1cblxuICAvLyBidWlsZCBjZWlsaW5nIGFuZCBmbG9vclxuICBidWlsZENhcCh3YWxscywgcm9vbUVsPy5mbG9vciwgZmFsc2UsIG91dHNpZGUpO1xuICBidWlsZENhcCh3YWxscywgcm9vbUVsPy5jZWlsaW5nLCB0cnVlLCBvdXRzaWRlKTtcbn07XG5cbmNvbnN0IGJ1aWxkRG9vcmxpbmsgPSAoZG9vcmxpbmtFbCkgPT4ge1xuICBjb25zdCB7IGZyb20sIHRvIH0gPSBkb29ybGlua0VsLmdldEF0dHJpYnV0ZSgnZG9vcmxpbmsnKTtcbiAgY29uc3QgZnJvbVZlcnRzID0gZnJvbT8udmVydGljZXM7XG4gIGNvbnN0IHRvVmVydHMgPSB0bz8udmVydGljZXM7XG4gIGlmICghZnJvbVZlcnRzIHx8ICF0b1ZlcnRzKSB7IHJldHVybjsgfVxuXG4gIGZvciAoY29uc3QgZG9vcmxpbmtDaGlsZEVsIG9mIGRvb3JsaW5rRWwuY2hpbGRyZW4pIHtcbiAgICBjb25zdCB0eXBlcyA9IFsnc2lkZXMnLCAnZmxvb3InLCAnY2VpbGluZyddO1xuICAgIGZvciAoY29uc3QgdHlwZSBvZiB0eXBlcykge1xuICAgICAgaWYgKCFkb29ybGlua0NoaWxkRWwuY29tcG9uZW50c1t0eXBlXSkgeyBjb250aW51ZTsgfVxuXG4gICAgICBjb25zdCBtYXRlcmlhbCA9IGRvb3JsaW5rQ2hpbGRFbD8uY29tcG9uZW50cz8ubWF0ZXJpYWw/Lm1hdGVyaWFsIHx8IGRvb3JsaW5rQ2hpbGRFbD8ucGFyZW50RWw/LmNvbXBvbmVudHM/Lm1hdGVyaWFsPy5tYXRlcmlhbDtcblxuICAgICAgY29uc3QgaW5kaWNlcyA9ICh0eXBlID09PSAnc2lkZXMnKSA/IFswLCAxLCAyLCAxLCAzLCAyLCA0LCA1LCA2LCA1LCA3LCA2XSA6IFswLCAxLCAyLCAxLCAzLCAyXTtcbiAgICAgIGNvbnN0IGdlb20gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcbiAgICAgIGdlb20uc2V0SW5kZXgoaW5kaWNlcyk7XG5cbiAgICAgIGRvb3JsaW5rQ2hpbGRFbC5tZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbSwgbWF0ZXJpYWwpO1xuICAgICAgZG9vcmxpbmtDaGlsZEVsLnNldE9iamVjdDNEKHR5cGUsIGRvb3JsaW5rQ2hpbGRFbC5tZXNoKTtcblxuICAgICAgY29uc3QgcG9zaXRpb25zID0gW107XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdmbG9vcic6XG4gICAgICAgICAgYWRkRG9vcmxpbmtXb3JsZFZlcnRleCh0b1ZlcnRzWzBdLCBkb29ybGlua0NoaWxkRWwsIHBvc2l0aW9ucyk7XG4gICAgICAgICAgYWRkRG9vcmxpbmtXb3JsZFZlcnRleCh0b1ZlcnRzWzJdLCBkb29ybGlua0NoaWxkRWwsIHBvc2l0aW9ucyk7XG4gICAgICAgICAgYWRkRG9vcmxpbmtXb3JsZFZlcnRleChmcm9tVmVydHNbMl0sIGRvb3JsaW5rQ2hpbGRFbCwgcG9zaXRpb25zKTtcbiAgICAgICAgICBhZGREb29ybGlua1dvcmxkVmVydGV4KGZyb21WZXJ0c1swXSwgZG9vcmxpbmtDaGlsZEVsLCBwb3NpdGlvbnMpO1xuXG4gICAgICAgICAgZ2VvbS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHBvc2l0aW9ucyksIDMpKTtcblxuICAgICAgICAgIG1ha2VHZW9tZXRyeVV2cyhnZW9tLCAocG9pbnQsIHZlcnRJbmRleCkgPT4gKFsxIC0gKHZlcnRJbmRleCAlIDIpLCAxIC0gTWF0aC5mbG9vcih2ZXJ0SW5kZXggLyAyKV0pKTtcblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjZWlsaW5nJzpcbiAgICAgICAgICBhZGREb29ybGlua1dvcmxkVmVydGV4KHRvVmVydHNbM10sIGRvb3JsaW5rQ2hpbGRFbCwgcG9zaXRpb25zKTtcbiAgICAgICAgICBhZGREb29ybGlua1dvcmxkVmVydGV4KHRvVmVydHNbMV0sIGRvb3JsaW5rQ2hpbGRFbCwgcG9zaXRpb25zKTtcbiAgICAgICAgICBhZGREb29ybGlua1dvcmxkVmVydGV4KGZyb21WZXJ0c1sxXSwgZG9vcmxpbmtDaGlsZEVsLCBwb3NpdGlvbnMpO1xuICAgICAgICAgIGFkZERvb3JsaW5rV29ybGRWZXJ0ZXgoZnJvbVZlcnRzWzNdLCBkb29ybGlua0NoaWxkRWwsIHBvc2l0aW9ucyk7XG5cbiAgICAgICAgICBnZW9tLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkocG9zaXRpb25zKSwgMykpO1xuXG4gICAgICAgICAgbWFrZUdlb21ldHJ5VXZzKGdlb20sIChwb2ludCwgdmVydEluZGV4KSA9PiAoW3ZlcnRJbmRleCAlIDIsIDEgLSBNYXRoLmZsb29yKHZlcnRJbmRleCAvIDIpXSkpO1xuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NpZGVzJzpcbiAgICAgICAgICBhZGREb29ybGlua1dvcmxkVmVydGV4KHRvVmVydHNbMl0sIGRvb3JsaW5rQ2hpbGRFbCwgcG9zaXRpb25zKTtcbiAgICAgICAgICBhZGREb29ybGlua1dvcmxkVmVydGV4KHRvVmVydHNbM10sIGRvb3JsaW5rQ2hpbGRFbCwgcG9zaXRpb25zKTtcbiAgICAgICAgICBhZGREb29ybGlua1dvcmxkVmVydGV4KGZyb21WZXJ0c1swXSwgZG9vcmxpbmtDaGlsZEVsLCBwb3NpdGlvbnMpO1xuICAgICAgICAgIGFkZERvb3JsaW5rV29ybGRWZXJ0ZXgoZnJvbVZlcnRzWzFdLCBkb29ybGlua0NoaWxkRWwsIHBvc2l0aW9ucyk7XG5cbiAgICAgICAgICBhZGREb29ybGlua1dvcmxkVmVydGV4KGZyb21WZXJ0c1syXSwgZG9vcmxpbmtDaGlsZEVsLCBwb3NpdGlvbnMpO1xuICAgICAgICAgIGFkZERvb3JsaW5rV29ybGRWZXJ0ZXgoZnJvbVZlcnRzWzNdLCBkb29ybGlua0NoaWxkRWwsIHBvc2l0aW9ucyk7XG4gICAgICAgICAgYWRkRG9vcmxpbmtXb3JsZFZlcnRleCh0b1ZlcnRzWzBdLCBkb29ybGlua0NoaWxkRWwsIHBvc2l0aW9ucyk7XG4gICAgICAgICAgYWRkRG9vcmxpbmtXb3JsZFZlcnRleCh0b1ZlcnRzWzFdLCBkb29ybGlua0NoaWxkRWwsIHBvc2l0aW9ucyk7XG5cbiAgICAgICAgICBnZW9tLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkocG9zaXRpb25zKSwgMykpO1xuXG4gICAgICAgICAgbWFrZUdlb21ldHJ5VXZzKGdlb20sIChwb2ludCwgdmVydEluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1diA9IFtdO1xuICAgICAgICAgICAgdXZbMF0gPSBNYXRoLmZsb29yKHZlcnRJbmRleCAvIDIpO1xuICAgICAgICAgICAgdXZbMV0gPSB2ZXJ0SW5kZXggJSAyO1xuICAgICAgICAgICAgaWYgKHZlcnRJbmRleCA8IDQpIHsgdXZbMF0gPSAxIC0gdXZbMF07IH1cbiAgICAgICAgICAgIHJldHVybiB1djtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBmaW5pc2hHZW9tZXRyeShnZW9tKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBidWlsZERvb3JsaW5rLCBidWlsZFJvb20gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/systems/buildingService.js\n");

/***/ }),

/***/ "./src/systems/index.js":
/*!******************************!*\
  !*** ./src/systems/index.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n__webpack_require__(/*! ./building */ \"./src/systems/building.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtcy9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixtQkFBTyxDQUFDLDZDQUFZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWZyYW1lLXJvb20tY29tcG9uZW50Ly4vc3JjL3N5c3RlbXMvaW5kZXguanM/NzFkNSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vYnVpbGRpbmcnKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/systems/index.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});